// koffee 1.4.0

/*
 0000000   0000000  00000000    0000000   000      000      00000000  00000000
000       000       000   000  000   000  000      000      000       000   000
0000000   000       0000000    000   000  000      000      0000000   0000000
     000  000       000   000  000   000  000      000      000       000   000
0000000    0000000  000   000   0000000   0000000  0000000  00000000  000   000
 */
var Scroller, clamp, drag, elem, klog, ref, stopEvent,
    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

ref = require('kxk'), stopEvent = ref.stopEvent, clamp = ref.clamp, drag = ref.drag, elem = ref.elem, klog = ref.klog;

Scroller = (function() {
    function Scroller(column) {
        this.column = column;
        this.update = bind(this.update, this);
        this.onScroll = bind(this.onScroll, this);
        this.onWheel = bind(this.onWheel, this);
        this.onDrag = bind(this.onDrag, this);
        this.onStart = bind(this.onStart, this);
        this.elem = elem({
            "class": 'scrollbar right'
        });
        this.column.div.insertBefore(this.elem, this.column.table);
        this.handle = elem({
            "class": 'scrollhandle right'
        });
        this.elem.appendChild(this.handle);
        this.drag = new drag({
            target: this.elem,
            onStart: this.onStart,
            onMove: this.onDrag,
            cursor: 'ns-resize'
        });
        this.elem.addEventListener('wheel', this.onWheel);
        this.column.div.addEventListener('wheel', this.onWheel);
        this.column.div.addEventListener('scroll', this.onScroll);
        this.target = this.column.div;
    }

    Scroller.prototype.numRows = function() {
        return this.column.numRows();
    };

    Scroller.prototype.visRows = function() {
        return 1 + parseInt(this.column.browser.height() / this.column.rowHeight());
    };

    Scroller.prototype.rowHeight = function() {
        return this.column.rowHeight();
    };

    Scroller.prototype.height = function() {
        return this.column.browser.height();
    };

    Scroller.prototype.onStart = function(drag, event) {
        var br, ln, ly, sy;
        br = this.elem.getBoundingClientRect();
        sy = clamp(0, this.height(), event.clientY - br.top);
        ln = parseInt(this.numRows() * sy / this.height());
        ly = (ln - this.visRows() / 2) * this.rowHeight();
        return this.target.scrollTop = ly;
    };

    Scroller.prototype.onDrag = function(drag) {
        var delta;
        delta = (drag.delta.y / (this.visRows() * this.rowHeight())) * this.numRows() * this.rowHeight();
        this.target.scrollTop += delta;
        return this.update();
    };

    Scroller.prototype.onWheel = function(event) {
        if (Math.abs(event.deltaX) >= 2 * Math.abs(event.deltaY) || Math.abs(event.deltaY) === 0) {
            this.target.scrollLeft += event.deltaX;
        } else {
            this.target.scrollTop += event.deltaY;
        }
        return stopEvent(event);
    };

    Scroller.prototype.onScroll = function(event) {
        return this.update();
    };

    Scroller.prototype.toIndex = function(i) {
        var newTop, row;
        row = this.column.rows[i].div;
        newTop = this.target.scrollTop;
        if (newTop < row.offsetTop + this.rowHeight() - this.height()) {
            newTop = row.offsetTop + this.rowHeight() - this.height();
        } else if (newTop > row.offsetTop) {
            newTop = row.offsetTop;
        }
        this.target.scrollTop = parseInt(newTop);
        return this.update();
    };

    Scroller.prototype.update = function() {
        var base, base1, bh, ref1, ref2, ref3, scrollHeight, scrollTop, vh;
        if (this.numRows() * this.rowHeight() < this.height()) {
            this.elem.style.display = 'none';
            this.elem.style.top = "0";
            this.handle.style.top = "0";
            this.handle.style.height = "0";
            this.handle.style.width = "0";
        } else {
            this.elem.style.display = 'block';
            bh = this.numRows() * this.rowHeight();
            vh = Math.min(this.visRows() * this.rowHeight(), this.height());
            scrollTop = parseInt((this.target.scrollTop / bh) * vh);
            scrollHeight = parseInt(((this.visRows() * this.rowHeight()) / bh) * vh);
            scrollHeight = Math.max(scrollHeight, parseInt(this.rowHeight() / 4));
            scrollTop = Math.min(scrollTop, this.height() - scrollHeight);
            scrollTop = Math.max(0, scrollTop);
            this.elem.style.top = this.target.scrollTop + "px";
            this.handle.style.top = scrollTop + "px";
            this.handle.style.height = scrollHeight + "px";
            this.handle.style.width = "2px";
        }
        if (((ref1 = this.column.parent) != null ? ref1.type : void 0) === 'preview') {
            if ((typeof (base = this.column).prevColumn === "function" ? base.prevColumn().div.scrollTop : void 0) !== this.target.scrollTop) {
                this.column.prevColumn().div.scrollTop = this.target.scrollTop;
            }
        } else if ((typeof (base1 = this.column).nextColumn === "function" ? (ref2 = base1.nextColumn()) != null ? (ref3 = ref2.parent) != null ? ref3.type : void 0 : void 0 : void 0) === 'preview') {
            if (this.column.nextColumn().div.scrollTop !== this.target.scrollTop) {
                this.column.nextColumn().div.scrollTop = this.target.scrollTop;
            }
        }
        return this.handle.style.right = "-" + this.target.scrollLeft + "px";
    };

    return Scroller;

})();

module.exports = Scroller;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2Nyb2xsZXIuanMiLCJzb3VyY2VSb290IjoiLiIsInNvdXJjZXMiOlsiIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUE7Ozs7Ozs7QUFBQSxJQUFBLGlEQUFBO0lBQUE7O0FBUUEsTUFBeUMsT0FBQSxDQUFRLEtBQVIsQ0FBekMsRUFBRSx5QkFBRixFQUFhLGlCQUFiLEVBQW9CLGVBQXBCLEVBQTBCLGVBQTFCLEVBQWdDOztBQUUxQjtJQUVXLGtCQUFDLE1BQUQ7UUFBQyxJQUFDLENBQUEsU0FBRDs7Ozs7O1FBRVYsSUFBQyxDQUFBLElBQUQsR0FBUSxJQUFBLENBQUs7WUFBQSxDQUFBLEtBQUEsQ0FBQSxFQUFPLGlCQUFQO1NBQUw7UUFDUixJQUFDLENBQUEsTUFBTSxDQUFDLEdBQUcsQ0FBQyxZQUFaLENBQXlCLElBQUMsQ0FBQSxJQUExQixFQUFnQyxJQUFDLENBQUEsTUFBTSxDQUFDLEtBQXhDO1FBRUEsSUFBQyxDQUFBLE1BQUQsR0FBVSxJQUFBLENBQUs7WUFBQSxDQUFBLEtBQUEsQ0FBQSxFQUFPLG9CQUFQO1NBQUw7UUFDVixJQUFDLENBQUEsSUFBSSxDQUFDLFdBQU4sQ0FBa0IsSUFBQyxDQUFBLE1BQW5CO1FBRUEsSUFBQyxDQUFBLElBQUQsR0FBUSxJQUFJLElBQUosQ0FDSjtZQUFBLE1BQUEsRUFBUyxJQUFDLENBQUEsSUFBVjtZQUNBLE9BQUEsRUFBUyxJQUFDLENBQUEsT0FEVjtZQUVBLE1BQUEsRUFBUyxJQUFDLENBQUEsTUFGVjtZQUdBLE1BQUEsRUFBUyxXQUhUO1NBREk7UUFNUixJQUFDLENBQUEsSUFBSSxDQUFDLGdCQUFOLENBQTZCLE9BQTdCLEVBQXVDLElBQUMsQ0FBQSxPQUF4QztRQUNBLElBQUMsQ0FBQSxNQUFNLENBQUMsR0FBRyxDQUFDLGdCQUFaLENBQTZCLE9BQTdCLEVBQXVDLElBQUMsQ0FBQSxPQUF4QztRQUNBLElBQUMsQ0FBQSxNQUFNLENBQUMsR0FBRyxDQUFDLGdCQUFaLENBQTZCLFFBQTdCLEVBQXVDLElB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QixLQUFzQyxJQUFDLENBQUEsTUFBTSxDQUFDLFNBQWpEO2dCQUNJLElBQUMsQ0FBQSxNQUFNLENBQUMsVUFBUixDQUFBLENBQW9CLENBQUMsR0FBRyxDQUFDLFNBQXpCLEdBQXFDLElBQUMsQ0FBQSxNQUFNLENBQUMsVUFEakQ7YUFEQzs7ZUFJTCxJQUFDLENBQUEsTUFBTSxDQUFDLEtBQUssQ0FBQyxLQUFkLEdBQXNCLEdBQUEsR0FBSSxJQUFDLENBQUEsTUFBTSxDQUFDLFVBQVosR0FBdUI7SUF4Q3pDOzs7Ozs7QUEwQ1osTUFBTSxDQUFDLE9BQVAsR0FBaUIiLCJzb3VyY2VzQ29udGVudCI6WyIjIyNcbiAwMDAwMDAwICAgMDAwMDAwMCAgMDAwMDAwMDAgICAgMDAwMDAwMCAgIDAwMCAgICAgIDAwMCAgICAgIDAwMDAwMDAwICAwMDAwMDAwMFxuMDAwICAgICAgIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgMDAwICAgICAgMDAwICAgICAgIDAwMCAgIDAwMFxuMDAwMDAwMCAgIDAwMCAgICAgICAwMDAwMDAwICAgIDAwMCAgIDAwMCAgMDAwICAgICAgMDAwICAgICAgMDAwMDAwMCAgIDAwMDAwMDBcbiAgICAgMDAwICAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgICAgIDAwMCAgICAgIDAwMCAgICAgICAwMDAgICAwMDBcbjAwMDAwMDAgICAgMDAwMDAwMCAgMDAwICAgMDAwICAgMDAwMDAwMCAgIDAwMDAwMDAgIDAwMDAwMDAgIDAwMDAwMDAwICAwMDAgICAwMDBcbiMjI1xuXG57IHN0b3BFdmVudCwgY2xhbXAsIGRyYWcsIGVsZW0sIGtsb2cgfSA9IHJlcXVpcmUgJ2t4aydcblxuY2xhc3MgU2Nyb2xsZXJcblxuICAgIGNvbnN0cnVjdG9yOiAoQGNvbHVtbikgLT5cblxuICAgICAgICBAZWxlbSA9IGVsZW0gY2xhc3M6ICdzY3JvbGxiYXIgcmlnaHQnXG4gICAgICAgIEBjb2x1bW4uZGl2Lmluc2VydEJlZm9yZSBAZWxlbSwgQGNvbHVtbi50YWJsZVxuXG4gICAgICAgIEBoYW5kbGUgPSBlbGVtIGNsYXNzOiAnc2Nyb2xsaGFuZGxlIHJpZ2h0J1xuICAgICAgICBAZWxlbS5hcHBlbmRDaGlsZCBAaGFuZGxlXG5cbiAgICAgICAgQGRyYWcgPSBuZXcgZHJhZ1xuICAgICAgICAgICAgdGFyZ2V0OiAgQGVsZW1cbiAgICAgICAgICAgIG9uU3RhcnQ6IEBvblN0YXJ0XG4gICAgICAgICAgICBvbk1vdmU6ICBAb25EcmFnXG4gICAgICAgICAgICBjdXJzb3I6ICAnbnMtcmVzaXplJ1xuXG4gICAgICAgIEBlbGVtLmFkZEV2ZW50TGlzdGVuZXIgICAgICAgJ3doZWVsJywgIEBvbldoZWVsXG4gICAgICAgIEBjb2x1bW4uZGl2LmFkZEV2ZW50TGlzdGVuZXIgJ3doZWVsJywgIEBvbldoZWVsXG4gICAgICAgIEBjb2x1bW4uZGl2LmFkZEV2ZW50TGlzdGVuZXIgJ3Njcm9sbCcsIEBvblNjcm9sbFxuICAgICAgICBAdGFyZ2V0ID0gQGNvbHVtbi5kaXZcbiAgICAgICAgXG4gICAgbnVtUm93czogICAtPiBAY29sdW1uLm51bVJvd3MoKVxuICAgIHZpc1Jvd3M6ICAgLT4gMSArIHBhcnNlSW50IEBjb2x1bW4uYnJvd3Nlci5oZWlnaHQoKSAvIEBjb2x1bW4ucm93SGVpZ2h0KClcbiAgICByb3dIZWlnaHQ6IC0+IEBjb2x1bW4ucm93SGVpZ2h0KClcbiAgICBoZWlnaHQ6ICAgIC0+IEBjb2x1bW4uYnJvd3Nlci5oZWlnaHQoKVxuICAgIFxuICAgICMgIDAwMDAwMDAgIDAwMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAwMDAwMCAgIDAwMDAwMDAwMFxuICAgICMgMDAwICAgICAgICAgIDAwMCAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgICAgIDAwMFxuICAgICMgMDAwMDAwMCAgICAgIDAwMCAgICAgMDAwMDAwMDAwICAwMDAwMDAwICAgICAgIDAwMFxuICAgICMgICAgICAwMDAgICAgIDAwMCAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgICAgIDAwMFxuICAgICMgMDAwMDAwMCAgICAgIDAwMCAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgICAgIDAwMFxuXG4gICAgb25TdGFydDogKGRyYWcsIGV2ZW50KSA9PlxuICAgICAgICBcbiAgICAgICAgYnIgPSBAZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgICAgICBzeSA9IGNsYW1wIDAsIEBoZWlnaHQoKSwgZXZlbnQuY2xpZW50WSAtIGJyLnRvcFxuICAgICAgICBsbiA9IHBhcnNlSW50IEBudW1Sb3dzKCkgKiBzeS9AaGVpZ2h0KClcbiAgICAgICAgbHkgPSAobG4gLSBAdmlzUm93cygpIC8gMikgKiBAcm93SGVpZ2h0KClcbiAgICAgICAgQHRhcmdldC5zY3JvbGxUb3AgPSBseVxuXG4gICAgIyAwMDAwMDAwICAgIDAwMDAwMDAwICAgIDAwMDAwMDAgICAgMDAwMDAwMFxuICAgICMgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwXG4gICAgIyAwMDAgICAwMDAgIDAwMDAwMDAgICAgMDAwMDAwMDAwICAwMDAgIDAwMDBcbiAgICAjIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMFxuICAgICMgMDAwMDAwMCAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgIDAwMDAwMDBcblxuICAgIG9uRHJhZzogKGRyYWcpID0+XG4gICAgICAgIFxuICAgICAgICBkZWx0YSA9IChkcmFnLmRlbHRhLnkgLyAoQHZpc1Jvd3MoKSAqIEByb3dIZWlnaHQoKSkpICogQG51bVJvd3MoKSAqIEByb3dIZWlnaHQoKVxuICAgICAgICBAdGFyZ2V0LnNjcm9sbFRvcCArPSBkZWx0YVxuICAgICAgICBAdXBkYXRlKClcblxuICAgICMgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMDAwMDAwICAwMDAwMDAwMCAgMDAwXG4gICAgIyAwMDAgMCAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgICAgICAwMDBcbiAgICAjIDAwMDAwMDAwMCAgMDAwMDAwMDAwICAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMFxuICAgICMgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAgICAgMDAwXG4gICAgIyAwMCAgICAgMDAgIDAwMCAgIDAwMCAgMDAwMDAwMDAgIDAwMDAwMDAwICAwMDAwMDAwXG5cbiAgICBvbldoZWVsOiAoZXZlbnQpID0+XG4gICAgICAgIFxuICAgICAgICBpZiBNYXRoLmFicyhldmVudC5kZWx0YVgpID49IDIqTWF0aC5hYnMoZXZlbnQuZGVsdGFZKSBvciBNYXRoLmFicyhldmVudC5kZWx0YVkpID09IDBcbiAgICAgICAgICAgIEB0YXJnZXQuc2Nyb2xsTGVmdCArPSBldmVudC5kZWx0YVhcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgQHRhcmdldC5zY3JvbGxUb3AgKz0gZXZlbnQuZGVsdGFZXG4gICAgICAgIHN0b3BFdmVudCBldmVudCAgICBcbiAgICAgICAgXG4gICAgb25TY3JvbGw6IChldmVudCkgPT4gQHVwZGF0ZSgpXG5cbiAgICAjIDAwMCAgIDAwMCAgMDAwMDAwMDAgICAwMDAwMDAwICAgICAwMDAwMDAwICAgMDAwMDAwMDAwICAwMDAwMDAwMFxuICAgICMgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAgICAwMDAgICAgIDAwMFxuICAgICMgMDAwICAgMDAwICAwMDAwMDAwMCAgIDAwMCAgIDAwMCAgMDAwMDAwMDAwICAgICAwMDAgICAgIDAwMDAwMDBcbiAgICAjIDAwMCAgIDAwMCAgMDAwICAgICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgICAgMDAwICAgICAwMDBcbiAgICAjICAwMDAwMDAwICAgMDAwICAgICAgICAwMDAwMDAwICAgIDAwMCAgIDAwMCAgICAgMDAwICAgICAwMDAwMDAwMFxuXG4gICAgdG9JbmRleDogKGkpIC0+XG4gICAgICAgIFxuICAgICAgICByb3cgPSBAY29sdW1uLnJvd3NbaV0uZGl2XG4gICAgICAgIG5ld1RvcCA9IEB0YXJnZXQuc2Nyb2xsVG9wXG4gICAgICAgIGlmIG5ld1RvcCA8IHJvdy5vZmZzZXRUb3AgKyBAcm93SGVpZ2h0KCkgLSBAaGVpZ2h0KClcbiAgICAgICAgICAgIG5ld1RvcCA9IHJvdy5vZmZzZXRUb3AgKyBAcm93SGVpZ2h0KCkgLSBAaGVpZ2h0KClcbiAgICAgICAgZWxzZSBpZiBuZXdUb3AgPiByb3cub2Zmc2V0VG9wXG4gICAgICAgICAgICBuZXdUb3AgPSByb3cub2Zmc2V0VG9wXG4gICAgICAgIEB0YXJnZXQuc2Nyb2xsVG9wID0gcGFyc2VJbnQgbmV3VG9wXG4gICAgICAgIEB1cGRhdGUoKVxuXG4gICAgdXBkYXRlOiA9PlxuICAgICAgICBcbiAgICAgICAgIyBrbG9nICdzY3JvbGxlciB1cGRhdGUnIEBudW1Sb3dzKCksIEByb3dIZWlnaHQoKSwgQGhlaWdodCgpXG4gICAgICAgIGlmIEBudW1Sb3dzKCkgKiBAcm93SGVpZ2h0KCkgPCBAaGVpZ2h0KClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgQGVsZW0uc3R5bGUuZGlzcGxheSAgID0gJ25vbmUnXG4gICAgICAgICAgICBAZWxlbS5zdHlsZS50b3AgICAgICAgPSBcIjBcIlxuICAgICAgICAgICAgQGhhbmRsZS5zdHlsZS50b3AgICAgID0gXCIwXCJcbiAgICAgICAgICAgIEBoYW5kbGUuc3R5bGUuaGVpZ2h0ICA9IFwiMFwiXG4gICAgICAgICAgICBAaGFuZGxlLnN0eWxlLndpZHRoICAgPSBcIjBcIlxuICAgICAgICAgICAgXG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIEBlbGVtLnN0eWxlLmRpc3BsYXkgICA9ICdibG9jaydcbiAgICAgICAgICAgIGJoICAgICAgICAgICA9IEBudW1Sb3dzKCkgKiBAcm93SGVpZ2h0KClcbiAgICAgICAgICAgIHZoICAgICAgICAgICA9IE1hdGgubWluIChAdmlzUm93cygpICogQHJvd0hlaWdodCgpKSwgQGhlaWdodCgpXG4gICAgICAgICAgICBzY3JvbGxUb3AgICAgPSBwYXJzZUludCAoQHRhcmdldC5zY3JvbGxUb3AgLyBiaCkgKiB2aFxuICAgICAgICAgICAgc2Nyb2xsSGVpZ2h0ID0gcGFyc2VJbnQgKChAdmlzUm93cygpICogQHJvd0hlaWdodCgpKSAvIGJoKSAqIHZoXG4gICAgICAgICAgICBzY3JvbGxIZWlnaHQgPSBNYXRoLm1heCBzY3JvbGxIZWlnaHQsIHBhcnNlSW50IEByb3dIZWlnaHQoKS80XG4gICAgICAgICAgICBzY3JvbGxUb3AgICAgPSBNYXRoLm1pbiBzY3JvbGxUb3AsIEBoZWlnaHQoKS1zY3JvbGxIZWlnaHRcbiAgICAgICAgICAgIHNjcm9sbFRvcCAgICA9IE1hdGgubWF4IDAsIHNjcm9sbFRvcFxuXG4gICAgICAgICAgICBAZWxlbS5zdHlsZS50b3AgPSBcIiN7QHRhcmdldC5zY3JvbGxUb3B9cHhcIlxuXG4gICAgICAgICAgICBAaGFuZGxlLnN0eWxlLnRvcCAgICAgPSBcIiN7c2Nyb2xsVG9wfXB4XCJcbiAgICAgICAgICAgIEBoYW5kbGUuc3R5bGUuaGVpZ2h0ICA9IFwiI3tzY3JvbGxIZWlnaHR9cHhcIlxuICAgICAgICAgICAgQGhhbmRsZS5zdHlsZS53aWR0aCAgID0gXCIycHhcIlxuICAgICAgICAgICAgXG4gICAgICAgICAgICAjIGxvbmdDb2xvciAgPSBzY2hlbWUuY29sb3JGb3JDbGFzcyAnc2Nyb2xsZXIgbG9uZydcbiAgICAgICAgICAgICMgc2hvcnRDb2xvciA9IHNjaGVtZS5jb2xvckZvckNsYXNzICdzY3JvbGxlciBzaG9ydCdcbiAgICAgICAgICAgICMgY2YgPSAxIC0gY2xhbXAgMCwgMSwgKHNjcm9sbEhlaWdodC0xMCkvMjAwXG4gICAgICAgICAgICAjIGNzID0gc2NoZW1lLmZhZGVDb2xvciBsb25nQ29sb3IsIHNob3J0Q29sb3IsIGNmXG4gICAgICAgICAgICAjIEBoYW5kbGUuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY3NcblxuICAgICAgICBpZiBAY29sdW1uLnBhcmVudD8udHlwZSA9PSAncHJldmlldydcbiAgICAgICAgICAgIGlmIEBjb2x1bW4ucHJldkNvbHVtbj8oKS5kaXYuc2Nyb2xsVG9wICE9IEB0YXJnZXQuc2Nyb2xsVG9wXG4gICAgICAgICAgICAgICAgQGNvbHVtbi5wcmV2Q29sdW1uKCkuZGl2LnNjcm9sbFRvcCA9IEB0YXJnZXQuc2Nyb2xsVG9wXG4gICAgICAgIGVsc2UgaWYgQGNvbHVtbi5uZXh0Q29sdW1uPygpPy5wYXJlbnQ/LnR5cGUgPT0gJ3ByZXZpZXcnXG4gICAgICAgICAgICBpZiBAY29sdW1uLm5leHRDb2x1bW4oKS5kaXYuc2Nyb2xsVG9wICE9IEB0YXJnZXQuc2Nyb2xsVG9wXG4gICAgICAgICAgICAgICAgQGNvbHVtbi5uZXh0Q29sdW1uKCkuZGl2LnNjcm9sbFRvcCA9IEB0YXJnZXQuc2Nyb2xsVG9wXG4gICAgICAgICAgICBcbiAgICAgICAgQGhhbmRsZS5zdHlsZS5yaWdodCA9IFwiLSN7QHRhcmdldC5zY3JvbGxMZWZ0fXB4XCJcblxubW9kdWxlLmV4cG9ydHMgPSBTY3JvbGxlclxuIl19
//# sourceURL=../coffee/scroller.coffee
// koffee 1.4.0
var _;

_ = require('kxk')._;

module.exports = {
    actions: {
        menu: 'Line',
        toggleComment: {
            separator: true,
            name: 'Toggle Comment',
            combo: 'command+/',
            accel: 'ctrl+/'
        },
        toggleHeader: {
            name: 'Toggle Header',
            combo: 'command+alt+/',
            accel: 'alt+ctrl+/'
        }
    },
    toggleHeader: function() {
        var il, indent, j, k, len, len1, r, rgs;
        if (!this.lineComment) {
            return;
        }
        rgs = this.salterRangesAtPos(this.cursorPos());
        if (!rgs) {
            return;
        }
        il = _.min((function() {
            var j, len, results;
            results = [];
            for (j = 0, len = rgs.length; j < len; j++) {
                r = rgs[j];
                results.push(this.indentationAtLineIndex(r[0]));
            }
            return results;
        }).call(this));
        indent = _.padStart("", il);
        this["do"].start();
        if (!this["do"].line(rgs[0][0]).slice(il).startsWith(this.lineComment)) {
            for (j = 0, len = rgs.length; j < len; j++) {
                r = rgs[j];
                this["do"].change(r[0], this["do"].line(r[0]).splice(il, 0, this.lineComment + ' '));
            }
            this["do"]["delete"](_.first(rgs)[0] - 1);
            this["do"]["delete"](_.last(rgs)[0]);
            this.moveCursorsUp();
            this.moveCursorsRight(false, this.lineComment.length + 1);
        } else if (this.multiComment) {
            for (k = 0, len1 = rgs.length; k < len1; k++) {
                r = rgs[k];
                this["do"].change(r[0], this["do"].line(r[0]).splice(il, this.lineComment.length + 1));
            }
            this["do"].insert(_.last(rgs)[0] + 1, indent + this.multiComment.close);
            this["do"].insert(_.first(rgs)[0], indent + this.multiComment.open);
            this.moveCursorsDown();
            this.moveCursorsLeft(false, this.lineComment.length + 1);
        }
        return this["do"].end();
    },
    toggleComment: function() {
        var cs, i, j, l, len, mainCursorLine, moveInLine, newCursors, newSelections, ref, si, uncomment;
        if (!this.lineComment) {
            return;
        }
        this["do"].start();
        newCursors = this["do"].cursors();
        newSelections = this["do"].selections();
        moveInLine = function(i, d) {
            var c, j, k, len, len1, ref, ref1, results, s;
            ref = rangesAtLineIndexInRanges(i, newSelections);
            for (j = 0, len = ref.length; j < len; j++) {
                s = ref[j];
                s[1][0] += d;
                s[1][1] += d;
            }
            ref1 = positionsAtLineIndexInPositions(i, newCursors);
            results = [];
            for (k = 0, len1 = ref1.length; k < len1; k++) {
                c = ref1[k];
                results.push(cursorDelta(c, d));
            }
            return results;
        };
        mainCursorLine = this["do"].line(this.mainCursor()[1]);
        cs = mainCursorLine.indexOf(this.lineComment);
        uncomment = cs >= 0 && mainCursorLine.substr(0, cs).trim().length === 0;
        ref = this.selectedAndCursorLineIndices();
        for (j = 0, len = ref.length; j < len; j++) {
            i = ref[j];
            cs = this["do"].line(i).indexOf(this.lineComment);
            if (uncomment) {
                if (cs >= 0 && this["do"].line(i).substr(0, cs).trim().length === 0) {
                    this["do"].change(i, this["do"].line(i).splice(cs, this.lineComment.length));
                    moveInLine(i, -this.lineComment.length);
                    si = indentationInLine(this["do"].line(i));
                    if (si % this.indentString.length === 1) {
                        this["do"].change(i, this["do"].line(i).splice(si - 1, 1));
                        moveInLine(i, -1);
                    }
                }
            } else {
                si = indentationInLine(this["do"].line(i));
                if (this["do"].line(i).length > si) {
                    l = (this.lineComment + " ").length;
                    this["do"].change(i, this["do"].line(i).splice(si, 0, this.lineComment + " "));
                    moveInLine(i, l);
                }
            }
        }
        this["do"].select(newSelections);
        this["do"].setCursors(newCursors);
        return this["do"].end();
    }
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidG9nZ2xlY29tbWVudC5qcyIsInNvdXJjZVJvb3QiOiIuIiwic291cmNlcyI6WyIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQU9BLElBQUE7O0FBQUUsSUFBTSxPQUFBLENBQVEsS0FBUjs7QUFFUixNQUFNLENBQUMsT0FBUCxHQUVJO0lBQUEsT0FBQSxFQUNJO1FBQUEsSUFBQSxFQUFNLE1BQU47UUFFQSxhQUFBLEVBQ0k7WUFBQSxTQUFBLEVBQVcsSUFBWDtZQUNBLElBQUEsRUFBTyxnQkFEUDtZQUVBLEtBQUEsRUFBTyxXQUZQO1lBR0EsS0FBQSxFQUFPLFFBSFA7U0FISjtRQVFBLFlBQUEsRUFDSTtZQUFBLElBQUEsRUFBTyxlQUFQO1lBQ0EsS0FBQSxFQUFPLGVBRFA7WUFFQSxLQUFBLEVBQU8sWUFGUDtTQVRKO0tBREo7SUFvQkEsWUFBQSxFQUFjLFNBQUE7QUFFVixZQUFBO1FBQUEsSUFBVSxDQUFJLElBQUMsQ0FBQSxXQUFmO0FBQUEsbUJBQUE7O1FBRUEsR0FBQSxHQUFNLElBQUMsQ0FBQSxpQkFBRCxDQUFtQixJQUFDLENBQUEsU0FBRCxDQUFBLENBQW5CO1FBQ04sSUFBVSxDQUFJLEdBQWQ7QUFBQSxtQkFBQTs7UUFDQSxFQUFBLEdBQVMsQ0FBQyxDQUFDLEdBQUY7O0FBQU87aUJBQUEscUNBQUE7OzZCQUFBLElBQUMsQ0FBQSxzQkFBRCxDQUF3QixDQUFFLENBQUEsQ0FBQSxDQUExQjtBQUFBOztxQkFBUDtRQUNULE1BQUEsR0FBUyxDQUFDLENBQUMsUUFBRixDQUFXLEVBQVgsRUFBZSxFQUFmO1FBQ1QsSUFBQyxFQUFBLEVBQUEsRUFBRSxDQUFDLEtBQUosQ0FBQTtRQUNBLElBQUcsQ0FBSSxJQUFDLEVBQUEsRUFBQSxFQUFFLENBQUMsSUFBSixDQUFTLEdBQUksQ0FBQSxDQUFBLENBQUcsQ0FBQSxDQUFBLENBQWhCLENBQW1CLENBQUMsS0FBcEIsQ0FBMEIsRUFBMUIsQ0FBNkIsQ0FBQyxVQUE5QixDQUF5QyxJQUFDLENBQUEsV0FBMUMs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LFVBQUEsQ0FBVyxDQUFYLEVBQWMsQ0FBQyxDQUFmLEVBRko7cUJBTEo7aUJBREo7YUFBQSxNQUFBO2dCQVVJLEVBQUEsR0FBSyxpQkFBQSxDQUFrQixJQUFDLEVBQUEsRUFBQSxFQUFFLENBQUMsSUFBSixDQUFTLENBQVQsQ0FBbEI7Z0JBQ0wsSUFBRyxJQUFDLEVBQUEsRUFBQSxFQUFFLENBQUMsSUFBSixDQUFTLENBQVQsQ0FBVyxDQUFDLE1BQVosR0FBcUIsRUFBeEI7b0JBQ0ksQ0FBQSxHQUFJLENBQUMsSUFBQyxDQUFBLFdBQUQsR0FBZSxHQUFoQixDQUFvQixDQUFDO29CQUN6QixJQUFDLEVBQUEsRUFBQSxFQUFFLENBQUMsTUFBSixDQUFXLENBQVgsRUFBYyxJQUFDLEVBQUEsRUFBQSxFQUFFLENBQUMsSUFBSixDQUFTLENBQVQsQ0FBVyxDQUFDLE1BQVosQ0FBbUIsRUFBbkIsRUFBdUIsQ0FBdkIsRUFBMEIsSUFBQyxDQUFBLFdBQUQsR0FBZSxHQUF6QyxDQUFkO29CQUNBLFVBQUEsQ0FBVyxDQUFYLEVBQWMsQ0FBZCxFQUhKO2lCQVhKOztBQUZKO1FBaUJBLElBQUMsRUFBQSxFQUFBLEVBQUUsQ0FBQyxNQUFKLENBQVcsYUFBWDtRQUNBLElBQUMsRUFBQSxFQUFBLEVBQUUsQ0FBQyxVQUFKLENBQWUsVUFBZjtlQUNBLElBQUMsRUFBQSxFQUFBLEVBQUUsQ0FBQyxHQUFKLENBQUE7SUF0Q1csQ0FyRGYiLCJzb3VyY2VzQ29udGVudCI6WyJcbiMgMDAwMDAwMDAwICAgMDAwMDAwMCAgICAwMDAwMDAwICAgIDAwMDAwMDAgICAwMDAgICAgICAwMDAwMDAwMCAgICAgICAgIDAwICAwMCAgICAwMCAgMDAgICAgMDAgIDAwICAgXG4jICAgIDAwMCAgICAgMDAwICAgMDAwICAwMDAgICAgICAgIDAwMCAgICAgICAgMDAwICAgICAgMDAwICAgICAgICAgICAgIDAwMDAwMDAwICAwMDAwMDAwMCAgMDAwMDAwMDAgIFxuIyAgICAwMDAgICAgIDAwMCAgIDAwMCAgMDAwICAwMDAwICAwMDAgIDAwMDAgIDAwMCAgICAgIDAwMDAwMDAgICAgICAgICAgMDAgIDAwICAgIDAwICAwMCAgICAwMCAgMDAgICBcbiMgICAgMDAwICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAgICAwMDAgICAgICAgICAgICAgMDAwMDAwMDAgIDAwMDAwMDAwICAwMDAwMDAwMCAgXG4jICAgIDAwMCAgICAgIDAwMDAwMDAgICAgMDAwMDAwMCAgICAwMDAwMDAwICAgMDAwMDAwMCAgMDAwMDAwMDAgICAgICAgICAwMCAgMDAgICAgMDAgIDAwICAgIDAwICAwMCAgIFxuXG57IF8gfSA9IHJlcXVpcmUgJ2t4aydcblxubW9kdWxlLmV4cG9ydHMgPVxuICAgIFxuICAgIGFjdGlvbnM6XG4gICAgICAgIG1lbnU6ICdMaW5lJ1xuICAgICAgICBcbiAgICAgICAgdG9nZ2xlQ29tbWVudDpcbiAgICAgICAgICAgIHNlcGFyYXRvcjogdHJ1ZVxuICAgICAgICAgICAgbmFtZTogICdUb2dnbGUgQ29tbWVudCdcbiAgICAgICAgICAgIGNvbWJvOiAnY29tbWFuZCsvJ1xuICAgICAgICAgICAgYWNjZWw6ICdjdHJsKy8nXG4gICAgICAgICAgICBcbiAgICAgICAgdG9nZ2xlSGVhZGVyOlxuICAgICAgICAgICAgbmFtZTogICdUb2dnbGUgSGVhZGVyJ1xuICAgICAgICAgICAgY29tYm86ICdjb21tYW5kK2FsdCsvJ1xuICAgICAgICAgICAgYWNjZWw6ICdhbHQrY3RybCsvJ1xuXG4gICAgIyAwMDAgICAwMDAgIDAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMDAwMDAgICAgMDAwMDAwMDAgIDAwMDAwMDAwICAgXG4gICAgIyAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgIDAwMCAgXG4gICAgIyAwMDAwMDAwMDAgIDAwMDAwMDAgICAwMDAwMDAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgIDAwMDAwMDAgICAgXG4gICAgIyAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgIDAwMCAgXG4gICAgIyAwMDAgICAwMDAgIDAwMDAwMDAwICAwMDAgICAwMDAgIDAwMDAwMDAgICAgMDAwMDAwMDAgIDAwMCAgIDAwMCAgXG4gICAgXG4gICAgdG9nZ2xlSGVhZGVyOiAtPlxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGlmIG5vdCBAbGluZUNvbW1lbnRcbiAgICAgICAgXG4gICAgICAgIHJncyA9IEBzYWx0ZXJSYW5nZXNBdFBvcyBAY3Vyc29yUG9zKClcbiAgICAgICAgcmV0dXJuIGlmIG5vdCByZ3NcbiAgICAgICAgaWwgICAgID0gXy5taW4gKEBpbmRlbnRhdGlvbkF0TGluZUluZGV4IHJbMF0gZm9yIHIgaW4gcmdzKVxuICAgICAgICBpbmRlbnQgPSBfLnBhZFN0YXJ0IFwiXCIsIGlsXG4gICAgICAgIEBkby5zdGFydCgpXG4gICAgICAgIGlmIG5vdCBAZG8ubGluZShyZ3NbMF1bMF0pLnNsaWNlKGlsKS5zdGFydHNXaXRoIEBsaW5lQ29tbWVudFxuICAgICAgICAgICAgIyBjb252ZXJ0IHRvIGxpbmUgY29tbWVudHNcbiAgICAgICAgICAgIGZvciByIGluIHJnc1xuICAgICAgICAgICAgICAgIEBkby5jaGFuZ2UgclswXSwgQGRvLmxpbmUoclswXSkuc3BsaWNlIGlsLCAwLCBAbGluZUNvbW1lbnQgKyAnICdcbiAgICAgICAgICAgIEBkby5kZWxldGUgXy5maXJzdChyZ3MpWzBdLTFcbiAgICAgICAgICAgIEBkby5kZWxldGUgXy5sYXN0KHJncylbMF1cbiAgICAgICAgICAgIEBtb3ZlQ3Vyc29yc1VwKClcbiAgICAgICAgICAgIEBtb3ZlQ3Vyc29yc1JpZ2h0IGZhbHNlLCBAbGluZUNvbW1lbnQubGVuZ3RoKzEgICAgICAgICAgICBcbiAgICAgICAgZWxzZSBpZiBAbXVsdGlDb21tZW50XG4gICAgICAgICAgICAjIGNvbnZlcnQgdG8gbXVsdGkgY29tbWVudFxuICAgICAgICAgICAgZm9yIHIgaW4gcmdzXG4gICAgICAgICAgICAgICAgQGRvLmNoYW5nZSByWzBdLCBAZG8ubGluZShyWzBdKS5zcGxpY2UgaWwsIEBsaW5lQ29tbWVudC5sZW5ndGgrMVxuICAgICAgICAgICAgQGRvLmluc2VydCBfLmxhc3QoIHJncylbMF0rMSwgaW5kZW50ICsgQG11bHRpQ29tbWVudC5jbG9zZVxuICAgICAgICAgICAgQGRvLmluc2VydCBfLmZpcnN0KHJncylbMF0sICAgaW5kZW50ICsgQG11bHRpQ29tbWVudC5vcGVuXG4gICAgICAgICAgICBAbW92ZUN1cnNvcnNEb3duKClcbiAgICAgICAgICAgIEBtb3ZlQ3Vyc29yc0xlZnQgZmFsc2UsIEBsaW5lQ29tbWVudC5sZW5ndGgrMVxuICAgICAgICBAZG8uZW5kKClcbiAgICAgICAgICAgIFxuICAgICMgIDAwMDAwMDAgICAwMDAwMDAwICAgMDAgICAgIDAwICAwMCAgICAgMDAgIDAwMDAwMDAwICAwMDAgICAwMDAgIDAwMDAwMDAwMCAgXG4gICAgIyAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMDAgIDAwMCAgICAgMDAwICAgICBcbiAgICAjIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMDAwMDAwMCAgMDAwMDAwMDAwICAwMDAwMDAwICAgMDAwIDAgMDAwICAgICAwMDAgICAgIFxuICAgICMgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwIDAgMDAwICAwMDAgMCAwMDAgIDAwMCAgICAgICAwMDAgIDAwMDAgICAgIDAwMCAgICAgXG4gICAgIyAgMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMDAgIDAwMCAgIDAwMCAgICAgMDAwICAgICBcbiAgICBcbiAgICB0b2dnbGVDb21tZW50OiAtPlxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGlmIG5vdCBAbGluZUNvbW1lbnRcbiAgICAgICAgXG4gICAgICAgIEBkby5zdGFydCgpXG4gICAgICAgIG5ld0N1cnNvcnMgICAgPSBAZG8uY3Vyc29ycygpXG4gICAgICAgIG5ld1NlbGVjdGlvbnMgPSBAZG8uc2VsZWN0aW9ucygpXG4gICAgICAgIFxuICAgICAgICBtb3ZlSW5MaW5lID0gKGksIGQpIC0+IFxuICAgICAgICAgICAgZm9yIHMgaW4gcmFuZ2VzQXRMaW5lSW5kZXhJblJhbmdlcyBpLCBuZXdTZWxlY3Rpb25zXG4gICAgICAgICAgICAgICAgc1sxXVswXSArPSBkXG4gICAgICAgICAgICAgICAgc1sxXVsxXSArPSBkXG4gICAgICAgICAgICBmb3IgYyBpbiBwb3NpdGlvbnNBdExpbmVJbmRleEluUG9zaXRpb25zIGksIG5ld0N1cnNvcnNcbiAgICAgICAgICAgICAgICBjdXJzb3JEZWx0YSBjLCBkXG4gICAgICAgICAgICAgICAgXG4gICAgICAgIG1haW5DdXJzb3JMaW5lID0gQGRvLmxpbmUgQG1haW5DdXJzb3IoKVsxXVxuICAgICAgICBjcyA9IG1haW5DdXJzb3JMaW5lLmluZGV4T2YgQGxpbmVDb21tZW50XG4gICAgICAgIHVuY29tbWVudCA9IGNzID49IDAgYW5kIG1haW5DdXJzb3JMaW5lLnN1YnN0cigwLGNzKS50cmltKCkubGVuZ3RoID09IDBcbiAgICAgICAgXG4gICAgICAgIGZvciBpIGluIEBzZWxlY3RlZEFuZEN1cnNvckxpbmVJbmRpY2VzKClcbiAgICAgICAgICAgIGNzID0gQGRvLmxpbmUoaSkuaW5kZXhPZiBAbGluZUNvbW1lbnRcbiAgICAgICAgICAgIGlmIHVuY29tbWVudCBcbiAgICAgICAgICAgICAgICBpZiBjcyA+PSAwIGFuZCBAZG8ubGluZShpKS5zdWJzdHIoMCxjcykudHJpbSgpLmxlbmd0aCA9PSAwXG4gICAgICAgICAgICAgICAgICAgICMgcmVtb3ZlIGNvbW1lbnRcbiAgICAgICAgICAgICAgICAgICAgQGRvLmNoYW5nZSBpLCBAZG8ubGluZShpKS5zcGxpY2UgY3MsIEBsaW5lQ29tbWVudC5sZW5ndGhcbiAgICAgICAgICAgICAgICAgICAgbW92ZUluTGluZSBpLCAtQGxpbmVDb21tZW50Lmxlbmd0aFxuICAgICAgICAgICAgICAgICAgICBzaSA9IGluZGVudGF0aW9uSW5MaW5lIEBkby5saW5lKGkpXG4gICAgICAgICAgICAgICAgICAgIGlmIHNpICUgQGluZGVudFN0cmluZy5sZW5ndGggPT0gMSAjIHJlbW92ZSBzcGFjZSBhZnRlciBpbmRlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIEBkby5jaGFuZ2UgaSwgQGRvLmxpbmUoaSkuc3BsaWNlIHNpLTEsIDFcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVJbkxpbmUgaSwgLTFcbiAgICAgICAgICAgIGVsc2UgIyBpbnNlcnQgY29tbWVudFxuICAgICAgICAgICAgICAgIHNpID0gaW5kZW50YXRpb25JbkxpbmUgQGRvLmxpbmUoaSlcbiAgICAgICAgICAgICAgICBpZiBAZG8ubGluZShpKS5sZW5ndGggPiBzaVxuICAgICAgICAgICAgICAgICAgICBsID0gKEBsaW5lQ29tbWVudCArIFwiIFwiKS5sZW5ndGhcbiAgICAgICAgICAgICAgICAgICAgQGRvLmNoYW5nZSBpLCBAZG8ubGluZShpKS5zcGxpY2Ugc2ksIDAsIEBsaW5lQ29tbWVudCArIFwiIFwiXG4gICAgICAgICAgICAgICAgICAgIG1vdmVJbkxpbmUgaSwgbFxuICAgICAgICBAZG8uc2VsZWN0IG5ld1NlbGVjdGlvbnNcbiAgICAgICAgQGRvLnNldEN1cnNvcnMgbmV3Q3Vyc29yc1xuICAgICAgICBAZG8uZW5kKClcbiJdfQ==
//# sourceURL=../../../coffee/editor/actions/togglecomment.coffee
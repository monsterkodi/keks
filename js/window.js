// koffee 1.4.0

/*
000   000  000  000   000  0000000     0000000   000   000
000 0 000  000  0000  000  000   000  000   000  000 0 000
000000000  000  000 0 000  000   000  000   000  000000000
000   000  000  000  0000  000   000  000   000  000   000
00     00  000  000   000  0000000     0000000   00     00
 */
var $, Browser, FileBrowser, _, args, changeFontSize, clamp, defaultFontSize, dialog, electron, fileBrowser, getFontSize, klog, kpos, onCombo, onContextMenu, onMenuAction, onWheel, pkg, popup, post, prefs, ref, remote, resetFontSize, scheme, setFontSize, setStyle, slash, stopEvent, toggleExtensions, w, win, winID, winMain;

ref = require('kxk'), post = ref.post, args = ref.args, slash = ref.slash, prefs = ref.prefs, stopEvent = ref.stopEvent, setStyle = ref.setStyle, scheme = ref.scheme, popup = ref.popup, klog = ref.klog, clamp = ref.clamp, kpos = ref.kpos, win = ref.win, $ = ref.$, _ = ref._;

FileBrowser = require('./filebrowser');

w = new win({
    dir: __dirname,
    pkg: require('../package.json'),
    menu: '../coffee/menu.noon',
    icon: '../img/menu@2x.png',
    prefsSeperator: '▸',
    context: false,
    dragElem: $('#crumbs')
});

electron = require('electron');

pkg = require('../package.json');

remote = electron.remote;

dialog = remote.dialog;

Browser = remote.BrowserWindow;

win = window.win = remote.getCurrentWindow();

winID = window.winID = win.id;

fileBrowser = null;

winMain = function() {
    var ref1;
    fileBrowser = new FileBrowser($("#main"));
    fileBrowser.loadItem({
        type: 'dir',
        file: slash.resolve((ref1 = args.folder[0]) != null ? ref1 : '~')
    });
    return win.on('resize', function() {
        return fileBrowser.resized();
    });
};

onContextMenu = function(event) {
    if (!event.target.classList.contains('crumb')) {
        return;
    }
    return fileBrowser.columns[event.target.columnIndex].onContextMenu(event, true);
};

$("#crumbs").addEventListener('contextmenu', onContextMenu);

defaultFontSize = 18;

getFontSize = function() {
    return prefs.get('fontSize', defaultFontSize);
};

setFontSize = function(s) {
    if (!_.isFinite(s)) {
        s = getFontSize();
    }
    s = clamp(8, 44, s);
    prefs.set('fontSize', s);
    setStyle('#main', 'font-size', s + "px");
    return setStyle('.rowNameInput', 'font-size', s + "px");
};

changeFontSize = function(d) {
    var f, s;
    s = getFontSize();
    if (s >= 30) {
        f = 4;
    } else if (s >= 20) {
        f = 2;
    } else {
        f = 1;
    }
    return setFontSize(s + f * d);
};

resetFontSize = function() {
    prefs.set('fontSize', defaultFontSize);
    return setFontSize(defaultFontSize);
};

onWheel = function(event) {
    if (0 <= w.modifiers.indexOf('ctrl')) {
        return changeFontSize(-event.deltaY / 100);
    }
};

setFontSize(getFontSize());

window.document.addEventListener('wheel', onWheel);

onMenuAction = function(name, args) {
    switch (name) {
        case 'Toggle Extensions':
            return toggleExtensions();
        case 'Increase':
            return changeFontSize(+1);
        case 'Decrease':
            return changeFontSize(-1);
        case 'Reset':
            return resetFontSize();
        case 'Add to Shelf':
            return addToShelf();
        case 'Reload Window':
            return reloadWin();
    }
    klog('menuAction', name);
    return post.toMain('menuAction', name, args);
};

post.on('menuAction', onMenuAction);

toggleExtensions = function() {
    var stateKey;
    stateKey = "browser▸hideExtensions";
    prefs.set(stateKey, !prefs.get(stateKey, false));
    setStyle('.browserRow .ext', 'display', prefs.get(stateKey) && 'none' || 'initial');
    return setStyle('.fileInfoFile .ext', 'display', prefs.get(stateKey) && 'none' || 'initial');
};

onCombo = function(combo, info) {
    var char, event, key, mod;
    if (!combo) {
        return;
    }
    return mod = info.mod, key = info.key, combo = info.combo, char = info.char, event = info.event, info;
};

post.on('combo', onCombo);

winMain();

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2luZG93LmpzIiwic291cmNlUm9vdCI6Ii4iLCJzb3VyY2VzIjpbIiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBOzs7Ozs7O0FBQUEsSUFBQTs7QUFRQSxNQUFpRyxPQUFBLENBQVEsS0FBUixDQUFqRyxFQUFFLGVBQUYsRUFBUSxlQUFSLEVBQWMsaUJBQWQsRUFBcUIsaUJBQXJCLEVBQTRCLHlCQUE1QixFQUF1Qyx1QkFBdkMsRUFBaUQsbUJBQWpELEVBQXlELGlCQUF6RCxFQUFnRSxlQUFoRSxFQUFzRSxpQkFBdEUsRUFBNkUsZUFBN0UsRUFBbUYsYUFBbkYsRUFBd0YsU0FBeEYsRUFBMkY7O0FBRTNGLFdBQUEsR0FBYyxPQUFBLENBQVEsZUFBUjs7QUFFZCxDQUFBLEdBQUksSUFBSSxHQUFKLENBQ0E7SUFBQSxHQUFBLEVBQVEsU0FBUjtJQUNBLEdBQUEsRUFBUSxPQUFBLENBQVEsaUJBQVIsQ0FEUjtJQUVBLElBQUEsRUFBUSxxQkFGUjtJQUdBLElBQUEsRUFBUSxvQkFIUjtJQUlBLGNBQUEsRUFBZ0IsR0FKaEI7SUFLQSxPQUFBLEVBQVMsS0FMVDtJQU1BLFFBQUEsRUFBVSxDQUFBLENBQUUsU0FBRixDQU5WO0NBREE7O0FBU0osUUFBQSxHQUFXLE9BQUEsQ0FBUSxVQUFSOztBQUNYLEdBQUEsR0FBVyxPQUFBLENBQVEsaUJBQVI7O0FBRVgsTUFBQSxHQUFXLFFBQVEsQ0FBQzs7QUFDcEIsTUFBQSxHQUFXLE1BQU0sQ0FBQzs7QUFDbEIsT0FBQSxHQUFXLE1BQU0sQ0FBQzs7QUFDbEIsR0FBQSxHQUFXLE1BQU0sQ0FBQyxHQUFQLEdBQWUsTUFBTSxDQUFDLGdCQUFQLENBQUE7O0FBQzFCLEtBQUEsR0FBVyxNQUFNLENBQUMsS0FBUCxHQUFlLEdBQUcsQ0FBQzs7QUFDOUIsV0FBQSxHQUFjOztBQVFkLE9BQUEsR0FBVSxTQUFBO0FBRU4sUUFBQTtJQUFBLFdBQUEsR0FBYyxJQUFJLFdBQUosQ0FBZ0IsQ0FBQSxDQUFFLE9BQUYsQ0FBaEI7SUFD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Ylc7O0FBZWYsSUFBSSxDQUFDLEVBQUwsQ0FBUSxZQUFSLEVBQXFCLFlBQXJCOztBQUVBLGdCQUFBLEdBQW1CLFNBQUE7QUFFZixRQUFBO0lBQUEsUUFBQSxHQUFXO0lBQ1gsS0FBSyxDQUFDLEdBQU4sQ0FBVSxRQUFWLEVBQW9CLENBQUksS0FBSyxDQUFDLEdBQU4sQ0FBVSxRQUFWLEVBQW9CLEtBQXBCLENBQXhCO0lBQ0EsUUFBQSxDQUFTLGtCQUFULEVBQThCLFNBQTlCLEVBQXdDLEtBQUssQ0FBQyxHQUFOLENBQVUsUUFBVixDQUFBLElBQXdCLE1BQXhCLElBQWtDLFNBQTFFO1dBQ0EsUUFBQSxDQUFTLG9CQUFULEVBQThCLFNBQTlCLEVBQXdDLEtBQUssQ0FBQyxHQUFOLENBQVUsUUFBVixDQUFBLElBQXdCLE1BQXhCLElBQWtDLFNBQTFFO0FBTGU7O0FBYW5CLE9BQUEsR0FBVSxTQUFDLEtBQUQsRUFBUSxJQUFSO0FBRU4sUUFBQTtJQUFBLElBQVUsQ0FBSSxLQUFkO0FBQUEsZUFBQTs7V0FFRSxjQUFGLEVBQU8sY0FBUCxFQUFZLGtCQUFaLEVBQW1CLGdCQUFuQixFQUF5QixrQkFBekIsRUFBbUM7QUFKN0I7O0FBV1YsSUFBSSxDQUFDLEVBQUwsQ0FBUSxPQUFSLEVBQWdCLE9BQWhCOztBQUVBLE9BQUEsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIiMjI1xuMDAwICAgMDAwICAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgICAgMDAwMDAwMCAgIDAwMCAgIDAwMFxuMDAwIDAgMDAwICAwMDAgIDAwMDAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAwIDAwMFxuMDAwMDAwMDAwICAwMDAgIDAwMCAwIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMDAwMDAwMFxuMDAwICAgMDAwICAwMDAgIDAwMCAgMDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMFxuMDAgICAgIDAwICAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgICAgMDAwMDAwMCAgIDAwICAgICAwMFxuIyMjXG5cbnsgcG9zdCwgYXJncywgc2xhc2gsIHByZWZzLCBzdG9wRXZlbnQsIHNldFN0eWxlLCBzY2hlbWUsIHBvcHVwLCBrbG9nLCBjbGFtcCwga3Bvcywgd2luLCAkLCBfIH0gPSByZXF1aXJlICdreGsnXG5cbkZpbGVCcm93c2VyID0gcmVxdWlyZSAnLi9maWxlYnJvd3NlcidcbiAgXG53ID0gbmV3IHdpblxuICAgIGRpcjogICAgX19kaXJuYW1lXG4gICAgcGtnOiAgICByZXF1aXJlICcuLi9wYWNrYWdlLmpzb24nXG4gICAgbWVudTogICAnLi4vY29mZmVlL21lbnUubm9vbidcbiAgICBpY29uOiAgICcuLi9pbWcvbWVudUAyeC5wbmcnXG4gICAgcHJlZnNTZXBlcmF0b3I6ICfilrgnXG4gICAgY29udGV4dDogZmFsc2VcbiAgICBkcmFnRWxlbTogJCAnI2NydW1icydcbiAgICBcbmVsZWN0cm9uID0gcmVxdWlyZSAnZWxlY3Ryb24nXG5wa2cgICAgICA9IHJlcXVpcmUgJy4uL3BhY2thZ2UuanNvbidcblxucmVtb3RlICAgPSBlbGVjdHJvbi5yZW1vdGVcbmRpYWxvZyAgID0gcmVtb3RlLmRpYWxvZ1xuQnJvd3NlciAgPSByZW1vdGUuQnJvd3NlcldpbmRvd1xud2luICAgICAgPSB3aW5kb3cud2luICAgPSByZW1vdGUuZ2V0Q3VycmVudFdpbmRvdygpXG53aW5JRCAgICA9IHdpbmRvdy53aW5JRCA9IHdpbi5pZFxuZmlsZUJyb3dzZXIgPSBudWxsXG5cbiMgMDAwICAgMDAwICAwMDAgIDAwMCAgIDAwMCAgMDAgICAgIDAwICAgMDAwMDAwMCAgIDAwMCAgMDAwICAgMDAwXG4jIDAwMCAwIDAwMCAgMDAwICAwMDAwICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgIDAwMDAgIDAwMFxuIyAwMDAwMDAwMDAgIDAwMCAgMDAwIDAgMDAwICAwMDAwMDAwMDAgIDAwMDAwMDAwMCAgMDAwICAwMDAgMCAwMDBcbiMgMDAwICAgMDAwICAwMDAgIDAwMCAgMDAwMCAgMDAwIDAgMDAwICAwMDAgICAwMDAgIDAwMCAgMDAwICAwMDAwXG4jIDAwICAgICAwMCAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgIDAwMCAgIDAwMFxuXG53aW5NYWluID0gLT5cblxuICAgIGZpbGVCcm93c2VyID0gbmV3IEZpbGVCcm93c2VyICQgXCIjbWFpblwiXG4gICAgZmlsZUJyb3dzZXIubG9hZEl0ZW0gdHlwZTonZGlyJyBmaWxlOnNsYXNoLnJlc29sdmUgYXJncy5mb2xkZXJbMF0gPyAnfidcbiAgICBcbiAgICB3aW4ub24gJ3Jlc2l6ZScgLT4gZmlsZUJyb3dzZXIucmVzaXplZCgpXG5cbiMgd2luLm9uICdyZWFkeS10by1zaG93JyAtPlxuIyAgICAgXG4gICAgIyBrbG9nICdyZWFkeS10by1zaG93JyBmaWxlQnJvd3Nlci5jb2x1bW5zWzBdP1xuICAgIFxuIyAwMDAwMDAwMCAgICAwMDAwMDAwICAgMDAwMDAwMDAgICAwMDAgICAwMDAgIDAwMDAwMDAwXG4jIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwXG4jIDAwMDAwMDAwICAgMDAwICAgMDAwICAwMDAwMDAwMCAgIDAwMCAgIDAwMCAgMDAwMDAwMDBcbiMgMDAwICAgICAgICAwMDAgICAwMDAgIDAwMCAgICAgICAgMDAwICAgMDAwICAwMDBcbiMgMDAwICAgICAgICAgMDAwMDAwMCAgIDAwMCAgICAgICAgIDAwMDAwMDAgICAwMDBcblxub25Db250ZXh0TWVudSA9IChldmVudCkgLT4gXG4gICAgXG4gICAgcmV0dXJuIGlmIG5vdCBldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zICdjcnVtYidcbiAgICBcbiAgICBmaWxlQnJvd3Nlci5jb2x1bW5zW2V2ZW50LnRhcmdldC5jb2x1bW5JbmRleF0ub25Db250ZXh0TWVudSBldmVudCwgdHJ1ZVxuICAgIFxuJChcIiNjcnVtYnNcIikuYWRkRXZlbnRMaXN0ZW5lciAnY29udGV4dG1lbnUnIG9uQ29udGV4dE1lbnVcblxuXG4jIDAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgMDAwMDAwMDAwICAgICAgMDAwMDAwMCAgMDAwICAwMDAwMDAwICAwMDAwMDAwMFxuIyAwMDAgICAgICAgMDAwICAgMDAwICAwMDAwICAwMDAgICAgIDAwMCAgICAgICAgMDAwICAgICAgIDAwMCAgICAgMDAwICAgMDAwXG4jIDAwMDAwMCAgICAwMDAgICAwMDAgIDAwMCAwIDAwMCAgICAgMDAwICAgICAgICAwMDAwMDAwICAgMDAwICAgIDAwMCAgICAwMDAwMDAwXG4jIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgMDAwMCAgICAgMDAwICAgICAgICAgICAgIDAwMCAgMDAwICAgMDAwICAgICAwMDBcbiMgMDAwICAgICAgICAwMDAwMDAwICAgMDAwICAgMDAwICAgICAwMDAgICAgICAgIDAwMDAwMDAgICAwMDAgIDAwMDAwMDAgIDAwMDAwMDAwXG5cbmRlZmF1bHRGb250U2l6ZSA9IDE4XG5cbmdldEZvbnRTaXplID0gLT4gcHJlZnMuZ2V0ICdmb250U2l6ZScgZGVmYXVsdEZvbnRTaXplXG5cbnNldEZvbnRTaXplID0gKHMpIC0+XG4gICAgICAgIFxuICAgIHMgPSBnZXRGb250U2l6ZSgpIGlmIG5vdCBfLmlzRmluaXRlIHNcbiAgICBzID0gY2xhbXAgOCA0NCBzXG5cbiAgICBwcmVmcy5zZXQgJ2ZvbnRTaXplJyBzXG5cbiAgICBzZXRTdHlsZSAnI21haW4nICAgICAgICAgJ2ZvbnQtc2l6ZScgXCIje3N9cHhcIlxuICAgIHNldFN0eWxlICcucm93TmFtZUlucHV0JyAnZm9udC1zaXplJyBcIiN7c31weFwiXG5cbmNoYW5nZUZvbnRTaXplID0gKGQpIC0+XG4gICAgXG4gICAgcyA9IGdldEZvbnRTaXplKClcbiAgICBpZiAgICAgIHMgPj0gMzAgdGhlbiBmID0gNFxuICAgIGVsc2UgaWYgcyA+PSAyMCB0aGVuIGYgPSAyXG4gICAgZWxzZSAgICAgICAgICAgICAgICAgZiA9IDFcbiAgICAgICAgXG4gICAgc2V0Rm9udFNpemUgcyArIGYqZFxuXG5yZXNldEZvbnRTaXplID0gLT5cbiAgICBcbiAgICBwcmVmcy5zZXQgJ2ZvbnRTaXplJyBkZWZhdWx0Rm9udFNpemVcbiAgICBzZXRGb250U2l6ZSBkZWZhdWx0Rm9udFNpemVcbiAgICAgXG5vbldoZWVsID0gKGV2ZW50KSAtPlxuICAgIFxuICAgIGlmIDAgPD0gdy5tb2RpZmllcnMuaW5kZXhPZiAnY3RybCdcbiAgICAgICAgY2hhbmdlRm9udFNpemUgLWV2ZW50LmRlbHRhWS8xMDBcbiAgXG5zZXRGb250U2l6ZSBnZXRGb250U2l6ZSgpXG53aW5kb3cuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciAnd2hlZWwnIG9uV2hlZWwgICAgXG5cbiMgMDAgICAgIDAwICAwMDAwMDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgICAgICAwMDAwMDAwICAgIDAwMDAwMDAgIDAwMDAwMDAwMCAgMDAwICAgMDAwMDAwMCAgIDAwMCAgIDAwMFxuIyAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAwICAwMDAgIDAwMCAgIDAwMCAgICAgMDAwICAgMDAwICAwMDAgICAgICAgICAgMDAwICAgICAwMDAgIDAwMCAgIDAwMCAgMDAwMCAgMDAwXG4jIDAwMDAwMDAwMCAgMDAwMDAwMCAgIDAwMCAwIDAwMCAgMDAwICAgMDAwICAgICAwMDAwMDAwMDAgIDAwMCAgICAgICAgICAwMDAgICAgIDAwMCAgMDAwICAgMDAwICAwMDAgMCAwMDBcbiMgMDAwIDAgMDAwICAwMDAgICAgICAgMDAwICAwMDAwICAwMDAgICAwMDAgICAgIDAwMCAgIDAwMCAgMDAwICAgICAgICAgIDAwMCAgICAgMDAwICAwMDAgICAwMDAgIDAwMCAgMDAwMFxuIyAwMDAgICAwMDAgIDAwMDAwMDAwICAwMDAgICAwMDAgICAwMDAwMDAwICAgICAgMDAwICAgMDAwICAgMDAwMDAwMCAgICAgMDAwICAgICAwMDAgICAwMDAwMDAwICAgMDAwICAgMDAwXG5cbm9uTWVudUFjdGlvbiA9IChuYW1lLCBhcmdzKSAtPlxuXG4gICAgc3dpdGNoIG5hbWVcblxuICAgICAgICB3aGVuICdUb2dnbGUgRXh0ZW5zaW9ucycgdGhlbiByZXR1cm4gdG9nZ2xlRXh0ZW5zaW9ucygpXG4gICAgICAgIHdoZW4gJ0luY3JlYXNlJyAgICAgICAgICB0aGVuIHJldHVybiBjaGFuZ2VGb250U2l6ZSArMVxuICAgICAgICB3aGVuICdEZWNyZWFzZScgICAgICAgICAgdGhlbiByZXR1cm4gY2hhbmdlRm9udFNpemUgLTFcbiAgICAgICAgd2hlbiAnUmVzZXQnICAgICAgICAgICAgIHRoZW4gcmV0dXJuIHJlc2V0Rm9udFNpemUoKVxuICAgICAgICB3aGVuICdBZGQgdG8gU2hlbGYnICAgICAgdGhlbiByZXR1cm4gYWRkVG9TaGVsZigpXG4gICAgICAgIHdoZW4gJ1JlbG9hZCBXaW5kb3cnICAgICB0aGVuIHJldHVybiByZWxvYWRXaW4oKVxuICAgICAgICBcbiAgICBrbG9nICdtZW51QWN0aW9uJyBuYW1lXG5cbiAgICBwb3N0LnRvTWFpbiAnbWVudUFjdGlvbicgbmFtZSwgYXJnc1xuXG5wb3N0Lm9uICdtZW51QWN0aW9uJyBvbk1lbnVBY3Rpb25cblxudG9nZ2xlRXh0ZW5zaW9ucyA9IC0+XG5cbiAgICBzdGF0ZUtleSA9IFwiYnJvd3NlcuKWuGhpZGVFeHRlbnNpb25zXCJcbiAgICBwcmVmcy5zZXQgc3RhdGVLZXksIG5vdCBwcmVmcy5nZXQgc3RhdGVLZXksIGZhbHNlXG4gICAgc2V0U3R5bGUgJy5icm93c2VyUm93IC5leHQnICAgJ2Rpc3BsYXknIHByZWZzLmdldChzdGF0ZUtleSkgYW5kICdub25lJyBvciAnaW5pdGlhbCdcbiAgICBzZXRTdHlsZSAnLmZpbGVJbmZvRmlsZSAuZXh0JyAnZGlzcGxheScgcHJlZnMuZ2V0KHN0YXRlS2V5KSBhbmQgJ25vbmUnIG9yICdpbml0aWFsJ1xuXG4jIDAwMCAgIDAwMCAgMDAwMDAwMDAgIDAwMCAgIDAwMFxuIyAwMDAgIDAwMCAgIDAwMCAgICAgICAgMDAwIDAwMFxuIyAwMDAwMDAwICAgIDAwMDAwMDAgICAgIDAwMDAwXG4jIDAwMCAgMDAwICAgMDAwICAgICAgICAgIDAwMFxuIyAwMDAgICAwMDAgIDAwMDAwMDAwICAgICAwMDBcblxub25Db21ibyA9IChjb21ibywgaW5mbykgLT5cblxuICAgIHJldHVybiBpZiBub3QgY29tYm9cblxuICAgIHsgbW9kLCBrZXksIGNvbWJvLCBjaGFyLCBldmVudCB9ID0gaW5mb1xuXG4gICAgIyBzd2l0Y2ggY29tYm9cbiAgICAgICAgIyB3aGVuICdjb21tYW5kK3NoaWZ0Kz0nICAgIHRoZW4gcmV0dXJuIHN0b3BFdmVudCBldmVudCwgQGNoYW5nZVpvb20gKzFcbiAgICAgICAgIyB3aGVuICdjb21tYW5kK3NoaWZ0Ky0nICAgIHRoZW4gcmV0dXJuIHN0b3BFdmVudCBldmVudCwgQGNoYW5nZVpvb20gLTFcbiAgICAgICAgIyB3aGVuICdjb21tYW5kK3NoaWZ0KzAnICAgIHRoZW4gcmV0dXJuIHN0b3BFdmVudCBldmVudCwgQHJlc2V0Wm9vbSgpXG5cbnBvc3Qub24gJ2NvbWJvJyBvbkNvbWJvXG5cbndpbk1haW4oKVxuIl19
//# sourceURL=../coffee/window.coffee
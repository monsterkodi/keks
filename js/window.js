// koffee 1.4.0

/*
000   000  000  000   000  0000000     0000000   000   000
000 0 000  000  0000  000  000   000  000   000  000 0 000
000000000  000  000 0 000  000   000  000   000  000000000
000   000  000  000  0000  000   000  000   000  000   000
00     00  000  000   000  0000000     0000000   00     00
 */
var $, Browser, FileBrowser, _, args, changeFontSize, clamp, defaultFontSize, dialog, electron, fileBrowser, getFontSize, hideExtensions, klog, kpos, onContextMenu, onMenuAction, onWheel, pkg, popup, post, prefs, ref, remote, resetFontSize, scheme, setFontSize, setStyle, slash, stopEvent, toggleExtensions, w, win, winID, winMain;

ref = require('kxk'), post = ref.post, args = ref.args, slash = ref.slash, prefs = ref.prefs, stopEvent = ref.stopEvent, setStyle = ref.setStyle, scheme = ref.scheme, popup = ref.popup, klog = ref.klog, clamp = ref.clamp, kpos = ref.kpos, win = ref.win, $ = ref.$, _ = ref._;

FileBrowser = require('./filebrowser');

w = new win({
    dir: __dirname,
    pkg: require('../package.json'),
    menu: '../coffee/menu.noon',
    icon: '../img/menu@2x.png',
    prefsSeperator: '▸',
    context: false,
    dragElem: $('#crumbs')
});

electron = require('electron');

pkg = require('../package.json');

remote = electron.remote;

dialog = remote.dialog;

Browser = remote.BrowserWindow;

win = window.win = remote.getCurrentWindow();

winID = window.winID = win.id;

fileBrowser = null;

winMain = function() {
    var active, load;
    fileBrowser = new FileBrowser($("#main"));
    if (args.folder[0]) {
        fileBrowser.browse(args.folder[0]);
    } else {
        if (load = prefs.get('load')) {
            klog('init load', load);
            if (load.last !== load.first) {
                active = load.last.slice(load.first.length);
                active = load.first + '/' + slash.split(active)[0];
            }
            fileBrowser.browse(load.first, {
                active: active,
                cb: function() {
                    return fileBrowser.navigateToFile(load.last);
                }
            });
        } else {
            fileBrowser.browse('~');
        }
    }
    win.on('resize', function() {
        return fileBrowser.resized();
    });
    return prefs.apply('browser▸hideExtensions', hideExtensions);
};

onContextMenu = function(event) {
    if (!event.target.classList.contains('crumb')) {
        return;
    }
    return fileBrowser.columns[event.target.columnIndex].onContextMenu(event, true);
};

$("#crumbs").addEventListener('contextmenu', onContextMenu);

defaultFontSize = 18;

getFontSize = function() {
    return prefs.get('fontSize', defaultFontSize);
};

setFontSize = function(s) {
    if (!_.isFinite(s)) {
        s = getFontSize();
    }
    s = clamp(8, 44, s);
    prefs.set('fontSize', s);
    setStyle('#main', 'font-size', s + "px");
    return setStyle('.rowNameInput', 'font-size', s + "px");
};

changeFontSize = function(d) {
    var f, s;
    s = getFontSize();
    if (s >= 30) {
        f = 4;
    } else if (s >= 20) {
        f = 2;
    } else {
        f = 1;
    }
    return setFontSize(s + f * d);
};

resetFontSize = function() {
    prefs.set('fontSize', defaultFontSize);
    return setFontSize(defaultFontSize);
};

onWheel = function(event) {
    if (0 <= w.modifiers.indexOf('ctrl')) {
        return changeFontSize(-event.deltaY / 100);
    }
};

setFontSize(getFontSize());

window.document.addEventListener('wheel', onWheel);

onMenuAction = function(name, args) {
    switch (name) {
        case 'Toggle Extensions':
            return toggleExtensions();
        case 'Increase':
            return changeFontSize(+1);
        case 'Decrease':
            return changeFontSize(-1);
        case 'Reset':
            return resetFontSize();
        case 'Add to Shelf':
            return addToShelf();
        case 'Reload Window':
            return reloadWin();
    }
    klog('menuAction', name);
    return post.toMain('menuAction', name, args);
};

post.on('menuAction', onMenuAction);

post.on('load', function(info) {
    var load;
    load = prefs.get('load', {});
    if (info.column) {
        load.last = info.item.file;
    } else {
        load.first = info.item.file;
        load.last = info.item.file;
    }
    return prefs.set('load', load);
});

toggleExtensions = function() {
    return prefs.toggle('browser▸hideExtensions', setExtensions);
};

hideExtensions = function(hide) {
    if (hide == null) {
        hide = true;
    }
    setStyle('.browserRow .ext', 'display', hide && 'none' || 'initial');
    return setStyle('.fileInfoFile .ext', 'display', hide && 'none' || 'initial');
};

winMain();

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2luZG93LmpzIiwic291cmNlUm9vdCI6Ii4iLCJzb3VyY2VzIjpbIiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBOzs7Ozs7O0FBQUEsSUFBQTs7QUFRQSxNQUFpRyxPQUFBLENBQVEsS0FBUixDQUFqRyxFQUFFLGVBQUYsRUFBUSxlQUFSLEVBQWMsaUJBQWQsRUFBcUIsaUJBQXJCLEVBQTRCLHlCQUE1QixFQUF1Qyx1QkFBdkMsRUFBaUQsbUJBQWpELEVBQXlELGlCQUF6RCxFQUFnRSxlQUFoRSxFQUFzRSxpQkFBdEUsRUFBNkUsZUFBN0UsRUFBbUYsYUFBbkYsRUFBd0YsU0FBeEYsRUFBMkY7O0FBRTNGLFdBQUEsR0FBYyxPQUFBLENBQVEsZUFBUjs7QUFFZCxDQUFBLEdBQUksSUFBSSxHQUFKLENBQ0E7SUFBQSxHQUFBLEVBQVEsU0FBUjtJQUNBLEdBQUEsRUFBUSxPQUFBLENBQVEsaUJBQVIsQ0FEUjtJQUVBLElBQUEsRUFBUSxxQkFGUjtJQUdBLElBQUEsRUFBUSxvQkFIUjtJQUlBLGNBQUEsRUFBZ0IsR0FKaEI7SUFLQSxPQUFBLEVBQVMsS0FMVDtJQU1BLFFBQUEsRUFBVSxDQUFBLENBQUUsU0FBRixDQU5WO0NBREE7O0FBU0osUUFBQSxHQUFXLE9BQUEsQ0FBUSxVQUFSOztBQUNYLEdBQUEsR0FBVyxPQUFBLENBQVEsaUJBQVI7O0FBRVgsTUFBQSxHQUFXLFFBQVEsQ0FBQzs7QUFDcEIsTUFBQSxHQUFXLE1BQU0sQ0FBQzs7QUFDbEIsT0FBQSxHQUFXLE1BQU0sQ0FBQzs7QUFDbEIsR0FBQSxHQUFXLE1BQU0sQ0FBQyxHQUFQLEdBQWUsTUFBTSxDQUFDLGdCQUFQLENBQUE7O0FBQzFCLEtBQUEsR0FBVyxNQUFNLENBQUMsS0FBUCxHQUFlLEdBQUcsQ0FBQzs7QUFDOUIsV0FBQSxHQUFjOztBQVFkLE9BQUEsR0FBVSxTQUFBO0FBRU4sUUFBQTtJQUFBLFdBQUEsR0FBYyxJQUFJLFdBQUosQ0FBZ0IsQ0FBQSxDQUFFLE9BQUYsQ0FBaEI7SUFF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O0FBUlcsQ0FBZjs7QUFVQSxnQkFBQSxHQUFtQixTQUFBO1dBQUcsS0FBSyxDQUFDLE1BQU4sQ0FBYSx3QkFBYixFQUFzQyxhQUF0QztBQUFIOztBQUNuQixjQUFBLEdBQWlCLFNBQUMsSUFBRDs7UUFBQyxPQUFLOztJQUVuQixRQUFBLENBQVMsa0JBQVQsRUFBOEIsU0FBOUIsRUFBd0MsSUFBQSxJQUFTLE1BQVQsSUFBbUIsU0FBM0Q7V0FDQSxRQUFBLENBQVMsb0JBQVQsRUFBOEIsU0FBOUIsRUFBd0MsSUFBQSxJQUFTLE1BQVQsSUFBbUIsU0FBM0Q7QUFIYTs7QUF3QmpCLE9BQUEsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIiMjI1xuMDAwICAgMDAwICAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgICAgMDAwMDAwMCAgIDAwMCAgIDAwMFxuMDAwIDAgMDAwICAwMDAgIDAwMDAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAwIDAwMFxuMDAwMDAwMDAwICAwMDAgIDAwMCAwIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMDAwMDAwMFxuMDAwICAgMDAwICAwMDAgIDAwMCAgMDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMFxuMDAgICAgIDAwICAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgICAgMDAwMDAwMCAgIDAwICAgICAwMFxuIyMjXG5cbnsgcG9zdCwgYXJncywgc2xhc2gsIHByZWZzLCBzdG9wRXZlbnQsIHNldFN0eWxlLCBzY2hlbWUsIHBvcHVwLCBrbG9nLCBjbGFtcCwga3Bvcywgd2luLCAkLCBfIH0gPSByZXF1aXJlICdreGsnXG5cbkZpbGVCcm93c2VyID0gcmVxdWlyZSAnLi9maWxlYnJvd3NlcidcbiAgXG53ID0gbmV3IHdpblxuICAgIGRpcjogICAgX19kaXJuYW1lXG4gICAgcGtnOiAgICByZXF1aXJlICcuLi9wYWNrYWdlLmpzb24nXG4gICAgbWVudTogICAnLi4vY29mZmVlL21lbnUubm9vbidcbiAgICBpY29uOiAgICcuLi9pbWcvbWVudUAyeC5wbmcnXG4gICAgcHJlZnNTZXBlcmF0b3I6ICfilrgnXG4gICAgY29udGV4dDogZmFsc2VcbiAgICBkcmFnRWxlbTogJCAnI2NydW1icydcbiAgICBcbmVsZWN0cm9uID0gcmVxdWlyZSAnZWxlY3Ryb24nXG5wa2cgICAgICA9IHJlcXVpcmUgJy4uL3BhY2thZ2UuanNvbidcblxucmVtb3RlICAgPSBlbGVjdHJvbi5yZW1vdGVcbmRpYWxvZyAgID0gcmVtb3RlLmRpYWxvZ1xuQnJvd3NlciAgPSByZW1vdGUuQnJvd3NlcldpbmRvd1xud2luICAgICAgPSB3aW5kb3cud2luICAgPSByZW1vdGUuZ2V0Q3VycmVudFdpbmRvdygpXG53aW5JRCAgICA9IHdpbmRvdy53aW5JRCA9IHdpbi5pZFxuZmlsZUJyb3dzZXIgPSBudWxsXG5cbiMgMDAwICAgMDAwICAwMDAgIDAwMCAgIDAwMCAgMDAgICAgIDAwICAgMDAwMDAwMCAgIDAwMCAgMDAwICAgMDAwXG4jIDAwMCAwIDAwMCAgMDAwICAwMDAwICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgIDAwMDAgIDAwMFxuIyAwMDAwMDAwMDAgIDAwMCAgMDAwIDAgMDAwICAwMDAwMDAwMDAgIDAwMDAwMDAwMCAgMDAwICAwMDAgMCAwMDBcbiMgMDAwICAgMDAwICAwMDAgIDAwMCAgMDAwMCAgMDAwIDAgMDAwICAwMDAgICAwMDAgIDAwMCAgMDAwICAwMDAwXG4jIDAwICAgICAwMCAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgIDAwMCAgIDAwMFxuXG53aW5NYWluID0gLT5cblxuICAgIGZpbGVCcm93c2VyID0gbmV3IEZpbGVCcm93c2VyICQgXCIjbWFpblwiXG4gICAgXG4gICAgaWYgYXJncy5mb2xkZXJbMF1cbiAgICAgICAgZmlsZUJyb3dzZXIuYnJvd3NlIGFyZ3MuZm9sZGVyWzBdXG4gICAgZWxzZVxuICAgICAgICBpZiBsb2FkID0gcHJlZnMuZ2V0ICdsb2FkJ1xuICAgICAgICAgICAga2xvZyAnaW5pdCBsb2FkJyBsb2FkXG4gICAgICAgICAgICBpZiBsb2FkLmxhc3QgIT0gbG9hZC5maXJzdFxuICAgICAgICAgICAgICAgIGFjdGl2ZSA9IGxvYWQubGFzdFtsb2FkLmZpcnN0Lmxlbmd0aC4uXVxuICAgICAgICAgICAgICAgIGFjdGl2ZSA9IGxvYWQuZmlyc3QgKyAnLycgKyBzbGFzaC5zcGxpdChhY3RpdmUpWzBdXG4gICAgICAgICAgICBmaWxlQnJvd3Nlci5icm93c2UgbG9hZC5maXJzdCwgYWN0aXZlOmFjdGl2ZSwgY2I6IC0+XG4gICAgICAgICAgICAgICAgZmlsZUJyb3dzZXIubmF2aWdhdGVUb0ZpbGUgbG9hZC5sYXN0XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGZpbGVCcm93c2VyLmJyb3dzZSAnfidcbiAgICBcbiAgICB3aW4ub24gJ3Jlc2l6ZScgLT4gZmlsZUJyb3dzZXIucmVzaXplZCgpXG4gICAgXG4gICAgcHJlZnMuYXBwbHkgJ2Jyb3dzZXLilrhoaWRlRXh0ZW5zaW9ucycgaGlkZUV4dGVuc2lvbnNcbiAgICBcbiMgMDAwMDAwMDAgICAgMDAwMDAwMCAgIDAwMDAwMDAwICAgMDAwICAgMDAwICAwMDAwMDAwMFxuIyAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMFxuIyAwMDAwMDAwMCAgIDAwMCAgIDAwMCAgMDAwMDAwMDAgICAwMDAgICAwMDAgIDAwMDAwMDAwXG4jIDAwMCAgICAgICAgMDAwICAgMDAwICAwMDAgICAgICAgIDAwMCAgIDAwMCAgMDAwXG4jIDAwMCAgICAgICAgIDAwMDAwMDAgICAwMDAgICAgICAgICAwMDAwMDAwICAgMDAwXG5cbm9uQ29udGV4dE1lbnUgPSAoZXZlbnQpIC0+IFxuICAgIFxuICAgIHJldHVybiBpZiBub3QgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyAnY3J1bWInXG4gICAgXG4gICAgZmlsZUJyb3dzZXIuY29sdW1uc1tldmVudC50YXJnZXQuY29sdW1uSW5kZXhdLm9uQ29udGV4dE1lbnUgZXZlbnQsIHRydWVcbiAgICBcbiQoXCIjY3J1bWJzXCIpLmFkZEV2ZW50TGlzdGVuZXIgJ2NvbnRleHRtZW51JyBvbkNvbnRleHRNZW51XG5cbiMgMDAwMDAwMDAgICAwMDAwMDAwICAgMDAwICAgMDAwICAwMDAwMDAwMDAgICAgICAwMDAwMDAwICAwMDAgIDAwMDAwMDAgIDAwMDAwMDAwXG4jIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMDAgIDAwMCAgICAgMDAwICAgICAgICAwMDAgICAgICAgMDAwICAgICAwMDAgICAwMDBcbiMgMDAwMDAwICAgIDAwMCAgIDAwMCAgMDAwIDAgMDAwICAgICAwMDAgICAgICAgIDAwMDAwMDAgICAwMDAgICAgMDAwICAgIDAwMDAwMDBcbiMgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAwMDAwICAgICAwMDAgICAgICAgICAgICAgMDAwICAwMDAgICAwMDAgICAgIDAwMFxuIyAwMDAgICAgICAgIDAwMDAwMDAgICAwMDAgICAwMDAgICAgIDAwMCAgICAgICAgMDAwMDAwMCAgIDAwMCAgMDAwMDAwMCAgMDAwMDAwMDBcblxuZGVmYXVsdEZvbnRTaXplID0gMThcblxuZ2V0Rm9udFNpemUgPSAtPiBwcmVmcy5nZXQgJ2ZvbnRTaXplJyBkZWZhdWx0Rm9udFNpemVcblxuc2V0Rm9udFNpemUgPSAocykgLT5cbiAgICAgICAgXG4gICAgcyA9IGdldEZvbnRTaXplKCkgaWYgbm90IF8uaXNGaW5pdGUgc1xuICAgIHMgPSBjbGFtcCA4IDQ0IHNcblxuICAgIHByZWZzLnNldCAnZm9udFNpemUnIHNcblxuICAgIHNldFN0eWxlICcjbWFpbicgICAgICAgICAnZm9udC1zaXplJyBcIiN7c31weFwiXG4gICAgc2V0U3R5bGUgJy5yb3dOYW1lSW5wdXQnICdmb250LXNpemUnIFwiI3tzfXB4XCJcblxuY2hhbmdlRm9udFNpemUgPSAoZCkgLT5cbiAgICBcbiAgICBzID0gZ2V0Rm9udFNpemUoKVxuICAgIGlmICAgICAgcyA+PSAzMCB0aGVuIGYgPSA0XG4gICAgZWxzZSBpZiBzID49IDIwIHRoZW4gZiA9IDJcbiAgICBlbHNlICAgICAgICAgICAgICAgICBmID0gMVxuICAgICAgICBcbiAgICBzZXRGb250U2l6ZSBzICsgZipkXG5cbnJlc2V0Rm9udFNpemUgPSAtPlxuICAgIFxuICAgIHByZWZzLnNldCAnZm9udFNpemUnIGRlZmF1bHRGb250U2l6ZVxuICAgIHNldEZvbnRTaXplIGRlZmF1bHRGb250U2l6ZVxuICAgICBcbm9uV2hlZWwgPSAoZXZlbnQpIC0+XG4gICAgXG4gICAgaWYgMCA8PSB3Lm1vZGlmaWVycy5pbmRleE9mICdjdHJsJ1xuICAgICAgICBjaGFuZ2VGb250U2l6ZSAtZXZlbnQuZGVsdGFZLzEwMFxuICBcbnNldEZvbnRTaXplIGdldEZvbnRTaXplKClcbndpbmRvdy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyICd3aGVlbCcgb25XaGVlbCAgICBcblxuIyAwMCAgICAgMDAgIDAwMDAwMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgICAgIDAwMDAwMDAgICAgMDAwMDAwMCAgMDAwMDAwMDAwICAwMDAgICAwMDAwMDAwICAgMDAwICAgMDAwXG4jIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMDAgIDAwMCAgMDAwICAgMDAwICAgICAwMDAgICAwMDAgIDAwMCAgICAgICAgICAwMDAgICAgIDAwMCAgMDAwICAgMDAwICAwMDAwICAwMDBcbiMgMDAwMDAwMDAwICAwMDAwMDAwICAgMDAwIDAgMDAwICAwMDAgICAwMDAgICAgIDAwMDAwMDAwMCAgMDAwICAgICAgICAgIDAwMCAgICAgMDAwICAwMDAgICAwMDAgIDAwMCAwIDAwMFxuIyAwMDAgMCAwMDAgIDAwMCAgICAgICAwMDAgIDAwMDAgIDAwMCAgIDAwMCAgICAgMDAwICAgMDAwICAwMDAgICAgICAgICAgMDAwICAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAwMDAwXG4jIDAwMCAgIDAwMCAgMDAwMDAwMDAgIDAwMCAgIDAwMCAgIDAwMDAwMDAgICAgICAwMDAgICAwMDAgICAwMDAwMDAwICAgICAwMDAgICAgIDAwMCAgIDAwMDAwMDAgICAwMDAgICAwMDBcblxub25NZW51QWN0aW9uID0gKG5hbWUsIGFyZ3MpIC0+XG5cbiAgICBzd2l0Y2ggbmFtZVxuXG4gICAgICAgIHdoZW4gJ1RvZ2dsZSBFeHRlbnNpb25zJyB0aGVuIHJldHVybiB0b2dnbGVFeHRlbnNpb25zKClcbiAgICAgICAgd2hlbiAnSW5jcmVhc2UnICAgICAgICAgIHRoZW4gcmV0dXJuIGNoYW5nZUZvbnRTaXplICsxXG4gICAgICAgIHdoZW4gJ0RlY3JlYXNlJyAgICAgICAgICB0aGVuIHJldHVybiBjaGFuZ2VGb250U2l6ZSAtMVxuICAgICAgICB3aGVuICdSZXNldCcgICAgICAgICAgICAgdGhlbiByZXR1cm4gcmVzZXRGb250U2l6ZSgpXG4gICAgICAgIHdoZW4gJ0FkZCB0byBTaGVsZicgICAgICB0aGVuIHJldHVybiBhZGRUb1NoZWxmKClcbiAgICAgICAgd2hlbiAnUmVsb2FkIFdpbmRvdycgICAgIHRoZW4gcmV0dXJuIHJlbG9hZFdpbigpXG4gICAgICAgIFxuICAgIGtsb2cgJ21lbnVBY3Rpb24nIG5hbWVcblxuICAgIHBvc3QudG9NYWluICdtZW51QWN0aW9uJyBuYW1lLCBhcmdzXG5cbnBvc3Qub24gJ21lbnVBY3Rpb24nIG9uTWVudUFjdGlvblxucG9zdC5vbiAnbG9hZCcgKGluZm8pIC0+XG4gICAgXG4gICAgbG9hZCA9IHByZWZzLmdldCAnbG9hZCcge31cbiAgICBpZiBpbmZvLmNvbHVtblxuICAgICAgICBsb2FkLmxhc3QgPSBpbmZvLml0ZW0uZmlsZVxuICAgIGVsc2VcbiAgICAgICAgbG9hZC5maXJzdCA9IGluZm8uaXRlbS5maWxlXG4gICAgICAgIGxvYWQubGFzdCAgPSBpbmZvLml0ZW0uZmlsZVxuICAgIHByZWZzLnNldCAnbG9hZCcgbG9hZFxuXG50b2dnbGVFeHRlbnNpb25zID0gLT4gcHJlZnMudG9nZ2xlICdicm93c2Vy4pa4aGlkZUV4dGVuc2lvbnMnIHNldEV4dGVuc2lvbnNcbmhpZGVFeHRlbnNpb25zID0gKGhpZGU9dHJ1ZSkgLT5cblxuICAgIHNldFN0eWxlICcuYnJvd3NlclJvdyAuZXh0JyAgICdkaXNwbGF5JyBoaWRlIGFuZCAnbm9uZScgb3IgJ2luaXRpYWwnXG4gICAgc2V0U3R5bGUgJy5maWxlSW5mb0ZpbGUgLmV4dCcgJ2Rpc3BsYXknIGhpZGUgYW5kICdub25lJyBvciAnaW5pdGlhbCdcblxuICAgICMgc3RhdGVLZXkgPSBcImJyb3dzZXLilrhoaWRlRXh0ZW5zaW9uc1wiXG4gICAgIyBwcmVmcy5zZXQgc3RhdGVLZXksIG5vdCBwcmVmcy5nZXQgc3RhdGVLZXksIGZhbHNlXG4gICAgIyBzZXRTdHlsZSAnLmJyb3dzZXJSb3cgLmV4dCcgICAnZGlzcGxheScgcHJlZnMuZ2V0KHN0YXRlS2V5KSBhbmQgJ25vbmUnIG9yICdpbml0aWFsJ1xuICAgICMgc2V0U3R5bGUgJy5maWxlSW5mb0ZpbGUgLmV4dCcgJ2Rpc3BsYXknIHByZWZzLmdldChzdGF0ZUtleSkgYW5kICdub25lJyBvciAnaW5pdGlhbCdcblxuIyAwMDAgICAwMDAgIDAwMDAwMDAwICAwMDAgICAwMDBcbiMgMDAwICAwMDAgICAwMDAgICAgICAgIDAwMCAwMDBcbiMgMDAwMDAwMCAgICAwMDAwMDAwICAgICAwMDAwMFxuIyAwMDAgIDAwMCAgIDAwMCAgICAgICAgICAwMDBcbiMgMDAwICAgMDAwICAwMDAwMDAwMCAgICAgMDAwXG5cbiMgb25Db21ibyA9IChjb21ibywgaW5mbykgLT5cblxuICAgICMgcmV0dXJuIGlmIG5vdCBjb21ib1xuXG4gICAgIyB7IG1vZCwga2V5LCBjb21ibywgY2hhciwgZXZlbnQgfSA9IGluZm9cblxuIyBwb3N0Lm9uICdjb21ibycgb25Db21ib1xuXG53aW5NYWluKClcbiJdfQ==
//# sourceURL=../coffee/window.coffee
// koffee 1.4.0

/*
000   000  000  000   000  0000000     0000000   000   000
000 0 000  000  0000  000  000   000  000   000  000 0 000
000000000  000  000 0 000  000   000  000   000  000000000
000   000  000  000  0000  000   000  000   000  000   000
00     00  000  000   000  0000000     0000000   00     00
 */
var $, Browser, FileBrowser, _, args, dialog, electron, klog, onCombo, onMenuAction, pkg, post, ref, remote, scheme, slash, stopEvent, w, win, winID, winMain;

ref = require('kxk'), post = ref.post, args = ref.args, slash = ref.slash, stopEvent = ref.stopEvent, scheme = ref.scheme, klog = ref.klog, win = ref.win, $ = ref.$, _ = ref._;

FileBrowser = require('./filebrowser');

w = new win({
    dir: __dirname,
    pkg: require('../package.json'),
    menu: '../coffee/menu.noon',
    icon: '../img/menu@2x.png',
    scheme: false
});

electron = require('electron');

pkg = require('../package.json');

remote = electron.remote;

dialog = remote.dialog;

Browser = remote.BrowserWindow;

win = window.win = remote.getCurrentWindow();

winID = window.winID = win.id;

winMain = function() {
    var fileBrowser;
    klog('win main');
    fileBrowser = new FileBrowser($("#main"));
    return fileBrowser.loadItem({
        type: 'dir',
        file: slash.resolve('~')
    });
};

window.onload = function() {
    return klog('win onload');
};

onMenuAction = function(name, args) {
    switch (name) {
        case 'Undo':
            return window.focusEditor["do"].undo();
        case 'Redo':
            return window.focusEditor["do"].redo();
        case 'Cut':
            return window.focusEditor.cut();
        case 'Copy':
            return window.focusEditor.copy();
        case 'Paste':
            return window.focusEditor.paste();
        case 'New Window':
            return post.toMain('newWindowWithFile', editor.currentFile);
        case 'Toggle Scheme':
            return scheme.toggle();
        case 'Increase':
            return changeFontSize(+1);
        case 'Decrease':
            return changeFontSize(-1);
        case 'Reset':
            return resetFontSize();
        case 'Add to Shelf':
            return addToShelf();
        case 'Reload Window':
            return reloadWin();
    }
    return post.toMain('menuAction', name, args);
};

post.on('menuAction', onMenuAction);

onCombo = function(combo, info) {
    var char, event, key, mod;
    if (!combo) {
        return;
    }
    mod = info.mod, key = info.key, combo = info.combo, char = info.char, event = info.event;
    switch (combo) {
        case 'f3':
            return stopEvent(event, screenShot());
    }
};

post.on('combo', onCombo);

winMain();

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2luZG93LmpzIiwic291cmNlUm9vdCI6Ii4iLCJzb3VyY2VzIjpbIiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBOzs7Ozs7O0FBQUEsSUFBQTs7QUFRQSxNQUE0RCxPQUFBLENBQVEsS0FBUixDQUE1RCxFQUFFLGVBQUYsRUFBUSxlQUFSLEVBQWMsaUJBQWQsRUFBcUIseUJBQXJCLEVBQWdDLG1CQUFoQyxFQUF3QyxlQUF4QyxFQUE4QyxhQUE5QyxFQUFtRCxTQUFuRCxFQUFzRDs7QUFFdEQsV0FBQSxHQUFjLE9BQUEsQ0FBUSxlQUFSOztBQUVkLENBQUEsR0FBSSxJQUFJLEdBQUosQ0FDQTtJQUFBLEdBQUEsRUFBUSxTQUFSO0lBQ0EsR0FBQSxFQUFRLE9BQUEsQ0FBUSxpQkFBUixDQURSO0lBRUEsSUFBQSxFQUFRLHFCQUZSO0lBR0EsSUFBQSxFQUFRLG9CQUhSO0lBSUEsTUFBQSxFQUFRLEtBSlI7Q0FEQTs7QUFPSixRQUFBLEdBQVcsT0FBQSxDQUFRLFVBQVI7O0FBQ1gsR0FBQSxHQUFXLE9BQUEsQ0FBUSxpQkFBUjs7QUFFWCxNQUFBLEdBQVcsUUFBUSxDQUFDOztBQUNwQixNQUFBLEdBQVcsTUFBTSxDQUFDOztBQUNsQixPQUFBLEdBQVcsTUFBTSxDQUFDOztBQUNsQixHQUFBLEdBQVcsTUFBTSxDQUFDLEdBQVAsR0FBZSxNQUFNLENBQUMsZ0JBQVAsQ0FBQTs7QUFDMUIsS0FBQSxHQUFXLE1BQU0sQ0FBQyxLQUFQLEdBQWUsR0FBRyxDQUFDOztBQVE5QixPQUFBLEdBQVUsU0FBQTtBQUVOLFFBQUE7SUFBQSxJQUFBLENBQUssVUFBTDtJQUVBLFdBQUEsR0FBYyxJQUFJLFdBQUosQ0FBZ0IsQ0FBQSxDQUFFLE9BQUYsQ0FBaEI7V0FDZCxXQUFXLENBQUMsUUFBWixDQUFxQjtRQUFBLElBQUEsRUFBSyxLQUFMO1FBQVcsSUFBQSxFQUFLLEtBQUssQ0FBQyxPQUFOLENBQWMsR0FBZCxDQUFoQjtLQUFyQjtBQUxNOztBQU9WLE1BQU0sQ0FBQyxNQUFQLEdBQWdCLFNBQUE7V0FBRyxJQUFBLENBQUssWUFBTDtBQUFIOztBQVFoQixZQUFBLEdBQWUsU0FBQyxJQUFELEVBQU8sSUFBUDtBQUVYLFlBQU8sSUFBUDtBQUFBLGFBRVMsTUFGVDtBQUVzQyxtQkFBTyxNQUFNLENBQUMsV0FBVyxFQUFDLEVBQUQsRUFBRyxDQUFDLElBQXRCLENBQUE7QUFGN0MsYUFHUyxNQUhUO0FBR3NDLG1CQUFPLE1BQU0sQ0FBQyxXQUFXLEVBQUMsRUFBRCxFQUFHLENBQUMsSUFBdEIsQ0FBQTtBQUg3QyxhQUlTLEtBSlQ7QUFJc0MsbUJBQU8sTUFBTSxDQUFDLFdBQVcsQ0FBQyxHQUFuQixDQUFBO0FBSjdDLGFBS1MsTUFMVDtBQUtzQyxtQkFBTyxNQUFNLENBQUMsV0FBVyxDQUFDLElBQW5CLENBQUE7QUFMN0MsYUFNUyxPQU5UO0FBTXNDLG1CQUFPLE1BQU0sQ0FBQyxXQUFXLENBQUMsS0FBbkIsQ0FBQTtBQU43QyxhQU9TLFlBUFQ7QUFPc0MsbUJBQU8sSUFBSSxDQUFDLE1BQUwsQ0FBWSxtQkFBWixFQUFpQyxNQUFNLENBQUMsV0FBeEM7QUFQN0MsYUFRUyxlQVJUO0FBUXNDLG1CQUFPLE1BQU0sQ0FBQyxNQUFQLENBQUE7QUFSN0MsYUFTUyxVQVRUO0FBU3NDLG1CQUFPLGNBQUEsQ0FBZSxDQUFDLENBQWhCO0FBVDdDLGFBVVMsVUFWVDtBQVVzQyxtQkFBTyxjQUFBLENBQWUsQ0FBQyxDQUFoQjtBQVY3QyxhQVdTLE9BWFQ7QUFXc0MsbUJBQU8sYUFBQSxDQUFBO0FBWDdDLGFBWVMsY0FaVDtBQVlzQyxtQkFBTyxVQUFBLENBQUE7QUFaN0MsYUFhUyxlQWJUO0FBYXNDLG1CQUFPLFNBQUEsQ0FBQTtBQWI3QztXQWVBLElBQUksQ0FBQyxNQUFMLENBQVksWUFBWixFQUEwQixJQUExQixFQUFnQyxJQUFoQztBQWpCVzs7QUFtQmYsSUFBSSxDQUFDLEVBQUwsQ0FBUSxZQUFSLEVBQXFCLFlBQXJCOztBQVFBLE9BQUEsR0FBVSxTQUFDLEtBQUQsRUFBUSxJQUFSO0FBRU4sUUFBQTtJQUFBLElBQVUsQ0FBSSxLQUFkO0FBQUEsZUFBQTs7SUFFRSxjQUFGLEVBQU8sY0FBUCxFQUFZLGtCQUFaLEVBQW1CLGdCQUFuQixFQUF5QjtBQUd6QixZQUFPLEtBQVA7QUFBQSxhQUNTLElBRFQ7QUFDbUMsbUJBQU8sU0FBQSxDQUFVLEtBQVYsRUFBaUIsVUFBQSxDQUFBLENBQWpCO0FBRDFDO0FBUE07O0FBYVYsSUFBSSxDQUFDLEVBQUwsQ0FBUSxPQUFSLEVBQWdCLE9BQWhCOztBQUVBLE9BQUEsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIiMjI1xuMDAwICAgMDAwICAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgICAgMDAwMDAwMCAgIDAwMCAgIDAwMFxuMDAwIDAgMDAwICAwMDAgIDAwMDAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAwIDAwMFxuMDAwMDAwMDAwICAwMDAgIDAwMCAwIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMDAwMDAwMFxuMDAwICAgMDAwICAwMDAgIDAwMCAgMDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMFxuMDAgICAgIDAwICAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgICAgMDAwMDAwMCAgIDAwICAgICAwMFxuIyMjXG5cbnsgcG9zdCwgYXJncywgc2xhc2gsIHN0b3BFdmVudCwgc2NoZW1lLCBrbG9nLCB3aW4sICQsIF8gfSA9IHJlcXVpcmUgJ2t4aydcblxuRmlsZUJyb3dzZXIgPSByZXF1aXJlICcuL2ZpbGVicm93c2VyJ1xuICBcbncgPSBuZXcgd2luXG4gICAgZGlyOiAgICBfX2Rpcm5hbWVcbiAgICBwa2c6ICAgIHJlcXVpcmUgJy4uL3BhY2thZ2UuanNvbidcbiAgICBtZW51OiAgICcuLi9jb2ZmZWUvbWVudS5ub29uJ1xuICAgIGljb246ICAgJy4uL2ltZy9tZW51QDJ4LnBuZydcbiAgICBzY2hlbWU6IGZhbHNlXG5cbmVsZWN0cm9uID0gcmVxdWlyZSAnZWxlY3Ryb24nXG5wa2cgICAgICA9IHJlcXVpcmUgJy4uL3BhY2thZ2UuanNvbidcblxucmVtb3RlICAgPSBlbGVjdHJvbi5yZW1vdGVcbmRpYWxvZyAgID0gcmVtb3RlLmRpYWxvZ1xuQnJvd3NlciAgPSByZW1vdGUuQnJvd3NlcldpbmRvd1xud2luICAgICAgPSB3aW5kb3cud2luICAgPSByZW1vdGUuZ2V0Q3VycmVudFdpbmRvdygpXG53aW5JRCAgICA9IHdpbmRvdy53aW5JRCA9IHdpbi5pZFxuXG4jIDAwMCAgIDAwMCAgMDAwICAwMDAgICAwMDAgIDAwICAgICAwMCAgIDAwMDAwMDAgICAwMDAgIDAwMCAgIDAwMFxuIyAwMDAgMCAwMDAgIDAwMCAgMDAwMCAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAwMDAwICAwMDBcbiMgMDAwMDAwMDAwICAwMDAgIDAwMCAwIDAwMCAgMDAwMDAwMDAwICAwMDAwMDAwMDAgIDAwMCAgMDAwIDAgMDAwXG4jIDAwMCAgIDAwMCAgMDAwICAwMDAgIDAwMDAgIDAwMCAwIDAwMCAgMDAwICAgMDAwICAwMDAgIDAwMCAgMDAwMFxuIyAwMCAgICAgMDAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAwMDAgICAwMDBcblxud2luTWFpbiA9IC0+IFxuXG4gICAga2xvZyAnd2luIG1haW4nXG4gICAgXG4gICAgZmlsZUJyb3dzZXIgPSBuZXcgRmlsZUJyb3dzZXIgJCBcIiNtYWluXCJcbiAgICBmaWxlQnJvd3Nlci5sb2FkSXRlbSB0eXBlOidkaXInIGZpbGU6c2xhc2gucmVzb2x2ZSAnfidcblxud2luZG93Lm9ubG9hZCA9IC0+IGtsb2cgJ3dpbiBvbmxvYWQnXG5cbiMgMDAgICAgIDAwICAwMDAwMDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgICAgICAwMDAwMDAwICAgIDAwMDAwMDAgIDAwMDAwMDAwMCAgMDAwICAgMDAwMDAwMCAgIDAwMCAgIDAwMFxuIyAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAwICAwMDAgIDAwMCAgIDAwMCAgICAgMDAwICAgMDAwICAwMDAgICAgICAgICAgMDAwICAgICAwMDAgIDAwMCAgIDAwMCAgMDAwMCAgMDAwXG4jIDAwMDAwMDAwMCAgMDAwMDAwMCAgIDAwMCAwIDAwMCAgMDAwICAgMDAwICAgICAwMDAwMDAwMDAgIDAwMCAgICAgICAgICAwMDAgICAgIDAwMCAgMDAwICAgMDAwICAwMDAgMCAwMDBcbiMgMDAwIDAgMDAwICAwMDAgICAgICAgMDAwICAwMDAwICAwMDAgICAwMDAgICAgIDAwMCAgIDAwMCAgMDAwICAgICAgICAgIDAwMCAgICAgMDAwICAwMDAgICAwMDAgIDAwMCAgMDAwMFxuIyAwMDAgICAwMDAgIDAwMDAwMDAwICAwMDAgICAwMDAgICAwMDAwMDAwICAgICAgMDAwICAgMDAwICAgMDAwMDAwMCAgICAgMDAwICAgICAwMDAgICAwMDAwMDAwICAgMDAwICAgMDAwXG5cbm9uTWVudUFjdGlvbiA9IChuYW1lLCBhcmdzKSAtPlxuXG4gICAgc3dpdGNoIG5hbWVcblxuICAgICAgICB3aGVuICdVbmRvJyAgICAgICAgICAgICAgICAgIHRoZW4gcmV0dXJuIHdpbmRvdy5mb2N1c0VkaXRvci5kby51bmRvKClcbiAgICAgICAgd2hlbiAnUmVkbycgICAgICAgICAgICAgICAgICB0aGVuIHJldHVybiB3aW5kb3cuZm9jdXNFZGl0b3IuZG8ucmVkbygpXG4gICAgICAgIHdoZW4gJ0N1dCcgICAgICAgICAgICAgICAgICAgdGhlbiByZXR1cm4gd2luZG93LmZvY3VzRWRpdG9yLmN1dCgpXG4gICAgICAgIHdoZW4gJ0NvcHknICAgICAgICAgICAgICAgICAgdGhlbiByZXR1cm4gd2luZG93LmZvY3VzRWRpdG9yLmNvcHkoKVxuICAgICAgICB3aGVuICdQYXN0ZScgICAgICAgICAgICAgICAgIHRoZW4gcmV0dXJuIHdpbmRvdy5mb2N1c0VkaXRvci5wYXN0ZSgpXG4gICAgICAgIHdoZW4gJ05ldyBXaW5kb3cnICAgICAgICAgICAgdGhlbiByZXR1cm4gcG9zdC50b01haW4gJ25ld1dpbmRvd1dpdGhGaWxlJywgZWRpdG9yLmN1cnJlbnRGaWxlXG4gICAgICAgIHdoZW4gJ1RvZ2dsZSBTY2hlbWUnICAgICAgICAgdGhlbiByZXR1cm4gc2NoZW1lLnRvZ2dsZSgpXG4gICAgICAgIHdoZW4gJ0luY3JlYXNlJyAgICAgICAgICAgICAgdGhlbiByZXR1cm4gY2hhbmdlRm9udFNpemUgKzFcbiAgICAgICAgd2hlbiAnRGVjcmVhc2UnICAgICAgICAgICAgICB0aGVuIHJldHVybiBjaGFuZ2VGb250U2l6ZSAtMVxuICAgICAgICB3aGVuICdSZXNldCcgICAgICAgICAgICAgICAgIHRoZW4gcmV0dXJuIHJlc2V0Rm9udFNpemUoKVxuICAgICAgICB3aGVuICdBZGQgdG8gU2hlbGYnICAgICAgICAgIHRoZW4gcmV0dXJuIGFkZFRvU2hlbGYoKVxuICAgICAgICB3aGVuICdSZWxvYWQgV2luZG93JyAgICAgICAgIHRoZW4gcmV0dXJuIHJlbG9hZFdpbigpXG5cbiAgICBwb3N0LnRvTWFpbiAnbWVudUFjdGlvbicsIG5hbWUsIGFyZ3NcblxucG9zdC5vbiAnbWVudUFjdGlvbicgb25NZW51QWN0aW9uXG5cbiMgMDAwICAgMDAwICAwMDAwMDAwMCAgMDAwICAgMDAwXG4jIDAwMCAgMDAwICAgMDAwICAgICAgICAwMDAgMDAwXG4jIDAwMDAwMDAgICAgMDAwMDAwMCAgICAgMDAwMDBcbiMgMDAwICAwMDAgICAwMDAgICAgICAgICAgMDAwXG4jIDAwMCAgIDAwMCAgMDAwMDAwMDAgICAgIDAwMFxuXG5vbkNvbWJvID0gKGNvbWJvLCBpbmZvKSAtPlxuXG4gICAgcmV0dXJuIGlmIG5vdCBjb21ib1xuXG4gICAgeyBtb2QsIGtleSwgY29tYm8sIGNoYXIsIGV2ZW50IH0gPSBpbmZvXG5cblxuICAgIHN3aXRjaCBjb21ib1xuICAgICAgICB3aGVuICdmMycgICAgICAgICAgICAgICAgIHRoZW4gcmV0dXJuIHN0b3BFdmVudCBldmVudCwgc2NyZWVuU2hvdCgpXG4gICAgICAgICMgd2hlbiAnY29tbWFuZCtzaGlmdCs9JyAgICB0aGVuIHJldHVybiBzdG9wRXZlbnQgZXZlbnQsIEBjaGFuZ2Vab29tICsxXG4gICAgICAgICMgd2hlbiAnY29tbWFuZCtzaGlmdCstJyAgICB0aGVuIHJldHVybiBzdG9wRXZlbnQgZXZlbnQsIEBjaGFuZ2Vab29tIC0xXG4gICAgICAgICMgd2hlbiAnY29tbWFuZCtzaGlmdCswJyAgICB0aGVuIHJldHVybiBzdG9wRXZlbnQgZXZlbnQsIEByZXNldFpvb20oKVxuXG5wb3N0Lm9uICdjb21ibycgb25Db21ib1xuXG53aW5NYWluKClcbiJdfQ==
//# sourceURL=../coffee/window.coffee